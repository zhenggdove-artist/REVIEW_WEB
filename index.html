<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReViewTaiwan 重新觀看行動</title>
  <meta name="description" content="ReViewTaiwan 重新觀看行動">
  <meta property="og:title" content="ReViewTaiwan 重新觀看行動">
  <meta property="og:description" content="ReViewTaiwan 重新觀看行動">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ReViewTaiwan 重新觀看行動">
  <meta name="twitter:description" content="ReViewTaiwan 重新觀看行動">
  <link rel="preload" href="./fonts/ChenYuluoyan-Thin.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="./fonts/GarmentDistrict-Regular.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="./fonts/Streetwear.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="./fonts/GamaHand.otf" as="font" type="font/otf" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @font-face { font-family: 'ChenYuluoyan'; src: url('./fonts/ChenYuluoyan-Thin.ttf') format('truetype'); font-display: block; }
    @font-face { font-family: 'GarmentDistrict'; src: url('./fonts/GarmentDistrict-Regular.otf') format('opentype'); font-display: block; }
    @font-face { font-family: 'Streetwear'; src: url('./fonts/Streetwear.otf') format('opentype'); font-display: block; }
    @font-face { font-family: 'GamaHand'; src: url('./fonts/GamaHand.otf') format('opentype'); font-display: block; }
    body { background-color: #fcfcfc; color: #1a1a1a; margin: 0; padding: 0; overflow-x: hidden; }
    body.app-loading #app { visibility: hidden; }
    body.app-loading #custom-cursor { display: none !important; }
    body.app-loading #mobile-preview-overlay { display: none !important; }
    .sketch-border { border: 2px solid #1a1a1a; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; }
    .sketch-shadow { box-shadow: 6px 6px 0px 0px rgba(0,0,0,0.8); }
    .admin-highlight { outline: 3px dashed #FF00A0 !important; outline-offset: 4px; cursor: pointer; }
    .admin-highlight:hover { background: rgba(255,0,160,0.1); }
    .sidebar { width: 380px; background: #fff; border-left: 3px solid #000; height: 100vh; position: fixed; right: 0; top: 0; z-index: 2000; box-shadow: -10px 0 30px rgba(0,0,0,0.15); display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.3s ease; }
    .sidebar.open { transform: translateX(0); }
    .content-area { transition: margin-right 0.3s ease; }
    .admin-mode .content-area { margin-right: 380px; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background: #000; border-radius: 3px; }
    .modal-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 3000; }
    .admin-btn { width: 25px; height: 25px; border-radius: 50%; background: #888; border: none; cursor: pointer; transition: all 0.3s; opacity: 0.5; }
    .admin-btn:hover { opacity: 1; transform: scale(1.2); }
    .rich-editor { border: 2px solid #000; border-radius: 4px; min-height: 120px; padding: 12px; outline: none; background: #fff; }
    .rich-editor:focus { border-color: #FF00A0; }
    .toolbar-btn { padding: 6px 10px; border: 1px solid #ccc; background: #fff; cursor: pointer; font-size: 12px; border-radius: 3px; }
    .toolbar-btn:hover { background: #f0f0f0; }
    .toolbar-btn:active { background: #ddd; }
    /* 自適應內容的白色底框 */
    .media-container { display: inline-block; background: white; padding: 24px; max-width: 100%; }
    .content-box { display: inline-block; background: white; padding: 32px 48px; max-width: 90%; word-wrap: break-word; }

    /* Manifesto: prevent <pre> overflow */
    .manifesto-box { overflow-wrap: anywhere; word-break: break-word; }
    .manifesto-box pre { white-space: pre-wrap; overflow-wrap: anywhere; word-break: break-word; }
    .manifesto-box img { max-width: 100%; height: auto; }
    .manifesto-content { position: relative; transition: max-height 650ms ease, opacity 450ms ease; }
    .manifesto-content.manifesto-collapsed { overflow: hidden; cursor: pointer; opacity: 0.95; }
    .manifesto-content.manifesto-expanding { overflow: hidden; cursor: default; opacity: 1; }
    .manifesto-content.manifesto-expanded { overflow: visible; cursor: default; opacity: 1; }
    .manifesto-more {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 56px 0 12px;
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.02em;
      background: linear-gradient(to bottom, rgba(0,0,0,0), var(--manifesto-bg, rgba(255,255,255,1)));
      opacity: 1;
      transition: opacity 450ms ease;
    }
    .manifesto-more.manifesto-more-hidden { opacity: 0; }
    .manifesto-more .manifesto-more-label {
      display: inline-block;
      padding: 6px 14px;
      border: 2px solid rgba(0,0,0,0.35);
      border-radius: 9999px;
      background: rgba(255,255,255,0.92);
      font-size: 12px;
    }

    /* 輪播：交叉淡入淡出 + 尺寸（高度）漸變 */
    .carousel-container { transition: width 350ms ease; will-change: width; }
    .carousel-stage { position: relative; overflow: hidden; transition: height 350ms ease; will-change: height; }
    .carousel-layer { transition: opacity 350ms ease; will-change: opacity; }
    .carousel-layer-next { position: absolute; left: 0; top: 0; width: 100%; opacity: 0; }
    .carousel-stage.carousel-animating .carousel-layer-current { opacity: 0; }
    .carousel-stage.carousel-animating .carousel-layer-next { opacity: 1; }
    @media (prefers-reduced-motion: reduce) {
      .carousel-container { transition: none !important; }
      .carousel-stage { transition: none !important; }
      .carousel-layer { transition: none !important; }
      .manifesto-content { transition: none !important; }
      .manifesto-more { transition: none !important; }
    }
    /* 自訂動畫游標 */
    .custom-cursor-enabled { cursor: none !important; }
    .custom-cursor-enabled * { cursor: none !important; }
    #custom-cursor { position: fixed; pointer-events: none; z-index: 9999; transform: translate(-50%, -50%); display: none; }
    #custom-cursor img { width: 100%; height: 100%; object-fit: contain; }

    /* 手機預覽視窗（後台用） */
    #mobile-preview-overlay {
      --preview-scale: 0.85;
      position: fixed;
      left: 16px;
      bottom: 16px;
      z-index: 2600;
      display: none;
    }
    #mobile-preview-overlay .mobile-preview-panel {
      width: 390px;
      height: 844px;
      background: #fff;
      overflow: hidden;
      border: 3px solid #000;
      border-radius: 28px;
      box-shadow: 10px 10px 0px 0px rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      transform: scale(var(--preview-scale));
      transform-origin: bottom left;
    }
    #mobile-preview-overlay .mobile-preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 8px 10px;
      border-bottom: 2px solid #000;
      background: #fff;
    }
    #mobile-preview-overlay .mobile-preview-title {
      font-size: 12px;
      font-weight: 700;
      line-height: 1;
      user-select: none;
    }
    #mobile-preview-overlay .mobile-preview-tools {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: #333;
    }
    #mobile-preview-overlay .mobile-preview-tools input[type="range"] { width: 120px; }
    #mobile-preview-overlay .mobile-preview-close {
      width: 28px;
      height: 28px;
      border: 2px solid #000;
      background: #fff;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      line-height: 24px;
      padding: 0;
    }
    #mobile-preview-overlay .mobile-preview-iframe {
      border: 0;
      width: 390px;
      flex: 1;
      background: #fff;
    }

    /* 主標題圖片特效 */
    .hero-title-effect {
      --hero-fx-color: #00ffff;
      --hero-fx-speed: 8s;
      --hero-fx-glow1: 6px;
      --hero-fx-glow2: 14px;
      --hero-fx-glow3: 28px;
    }
    .hero-title-effect img { display: block; }

    .hero-title-effect-flicker img {
      animation: heroTitleFlicker var(--hero-fx-speed) infinite;
      filter:
        drop-shadow(0 0 var(--hero-fx-glow1) var(--hero-fx-color))
        drop-shadow(0 0 var(--hero-fx-glow2) var(--hero-fx-color))
        drop-shadow(0 0 var(--hero-fx-glow3) var(--hero-fx-color));
    }
    @keyframes heroTitleFlicker {
      0%, 100% { opacity: 1; }
      6% { opacity: 0.9; }
      7% { opacity: 1; }
      16% { opacity: 0.85; }
      17% { opacity: 1; }
      40% { opacity: 0.75; }
      41% { opacity: 1; }
      58% { opacity: 0.92; }
      59% { opacity: 1; }
      74% { opacity: 0.88; }
      75% { opacity: 1; }
    }

    .hero-title-effect-neon img {
      filter:
        drop-shadow(0 0 var(--hero-fx-glow1) var(--hero-fx-color))
        drop-shadow(0 0 var(--hero-fx-glow2) var(--hero-fx-color))
        drop-shadow(0 0 var(--hero-fx-glow3) var(--hero-fx-color));
      animation: heroTitleNeonPulse var(--hero-fx-speed) ease-in-out infinite;
    }
    @keyframes heroTitleNeonPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.85; }
    }

    .hero-title-effect-ripple img {
      filter: url(#fx-water-ripple);
    }

    /* 圓形裝飾圖片特效 */
    .circle-img-fx {
      --circle-fx-image: none;
      --circle-fx-rot-speed: 60s;
      --circle-fx-glitch-speed: 2.5s;
      --circle-fx-glitch-color: #00ffff;
      --circle-fx-glitch-opacity: 0.5;
      --circle-fx-glitch-shift: 4px;
      --circle-fx-glitch-shift-neg: -4px;
      position: relative;
      width: 100%;
      height: 100%;
    }
    .circle-img-fx .circle-img-rotator { width: 100%; height: 100%; }
    .circle-img-fx img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .circle-img-fx-rotate .circle-img-rotator,
    .circle-img-fx-rotate-glitch .circle-img-rotator {
      animation: circleImgRotate var(--circle-fx-rot-speed) linear infinite;
      transform-origin: 50% 50%;
    }
    @keyframes circleImgRotate { to { transform: rotate(360deg); } }

    .circle-img-fx-glitch::before,
    .circle-img-fx-glitch::after,
    .circle-img-fx-rotate-glitch::before,
    .circle-img-fx-rotate-glitch::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: var(--circle-fx-image);
      background-size: cover;
      background-position: center;
      opacity: var(--circle-fx-glitch-opacity);
      pointer-events: none;
      mix-blend-mode: screen;
      will-change: transform, clip-path, filter;
    }

    .circle-img-fx-glitch::before,
    .circle-img-fx-rotate-glitch::before {
      animation: circleImgGlitchA var(--circle-fx-glitch-speed) steps(2, end) infinite;
      filter: drop-shadow(var(--circle-fx-glitch-shift-neg) 0 0 var(--circle-fx-glitch-color));
    }

    .circle-img-fx-glitch::after,
    .circle-img-fx-rotate-glitch::after {
      animation: circleImgGlitchB var(--circle-fx-glitch-speed) steps(2, end) infinite;
      filter: drop-shadow(var(--circle-fx-glitch-shift) 0 0 var(--circle-fx-glitch-color));
      mix-blend-mode: lighten;
    }

    @keyframes circleImgGlitchA {
      0% { clip-path: inset(0 0 80% 0); transform: translate(var(--circle-fx-glitch-shift-neg), 0); }
      10% { clip-path: inset(10% 0 60% 0); transform: translate(var(--circle-fx-glitch-shift), -1px); }
      20% { clip-path: inset(30% 0 45% 0); transform: translate(var(--circle-fx-glitch-shift-neg), 1px); }
      30% { clip-path: inset(55% 0 25% 0); transform: translate(var(--circle-fx-glitch-shift), 0); }
      40% { clip-path: inset(70% 0 10% 0); transform: translate(var(--circle-fx-glitch-shift-neg), 0); }
      50% { clip-path: inset(0 0 80% 0); transform: translate(0, 0); }
      100% { clip-path: inset(0 0 80% 0); transform: translate(0, 0); }
    }

    @keyframes circleImgGlitchB {
      0% { clip-path: inset(85% 0 0 0); transform: translate(var(--circle-fx-glitch-shift), 0); }
      12% { clip-path: inset(60% 0 20% 0); transform: translate(var(--circle-fx-glitch-shift-neg), 1px); }
      24% { clip-path: inset(35% 0 45% 0); transform: translate(var(--circle-fx-glitch-shift), -1px); }
      36% { clip-path: inset(15% 0 70% 0); transform: translate(var(--circle-fx-glitch-shift-neg), 0); }
      48% { clip-path: inset(85% 0 0 0); transform: translate(var(--circle-fx-glitch-shift), 0); }
      100% { clip-path: inset(85% 0 0 0); transform: translate(0, 0); }
    }
  </style>
</head>
<body>
  <!-- 自訂動畫游標 -->
  <div id="custom-cursor"><img src="" alt=""></div>
  <div id="app"></div>
  <div id="mobile-preview-overlay"></div>
  <svg id="fx-filters" aria-hidden="true" width="0" height="0" style="position:absolute;width:0;height:0;overflow:hidden">
    <filter id="fx-water-ripple" x="-20%" y="-20%" width="140%" height="140%" color-interpolation-filters="sRGB">
      <feTurbulence id="fx-water-ripple-turbulence" type="turbulence" baseFrequency="0.010 0.020" numOctaves="2" seed="2" result="noise" />
      <feDisplacementMap id="fx-water-ripple-displacement" in="SourceGraphic" in2="noise" scale="18" xChannelSelector="R" yChannelSelector="G" />
    </filter>
  </svg>

  <script>
    // ============ 可用字體列表 ============
    const AVAILABLE_FONTS = [
      { id: 'GarmentDistrict', name: 'Garment District' },
      { id: 'Streetwear', name: 'Streetwear' },
      { id: 'GamaHand', name: 'Gama Hand' },
      { id: 'ChenYuluoyan', name: '辰宇落雁體' }
    ];

    // ============ 初始數據 ============
    _DATA = {
  "settings": {
    "englishFont": "ChenYuluoyan",
    "cursorSize": 70,
    "pageTitle": "RE:VIEW Taiwan - 重新觀看行動",
    "favicon": "",
    "mobile": {
      "favicon": "https://duk.tw/keyJ42.png",
      "pageTitle": "RE:VIEW Taiwan - 重新觀看行動"
    },
    "shareTitle": "RE:VIEW Taiwan - 重新觀看行動",
    "shareDescription": "RE:VIEW Taiwan - 重新觀看行動",
    "shareImage": ""
  },
  "background": {
    "color": "#fcfcfc",
    "image": "https://duk.tw/LkYAiN.jpg",
    "size": "100% 100%",
    "mobile": {
      "posX": 23,
      "posY": 40,
      "image": "https://duk.tw/jIofJu.jpg"
    }
  },
  "decoration": {
    "circleImage": {
      "id": "deco-circle",
      "type": "image",
      "content": "https://duk.tw/fVbTF8.jpg",
      "style": {
        "rotation": -5.5,
        "opacity": 69,
        "opacityEdited": true,
        "circleFxType": "rotate"
      },
      "mobile": {
        "posX": 128,
        "posY": 27,
        "anchorX": "right",
        "size": 112,
        "style": {
          "opacity": 59,
          "opacityEdited": true,
          "circleFxType": "rotate-glitch"
        }
      },
      "size": 220
    },
    "leftAnimation": {
      "id": "left-animation",
      "content": "",
      "width": 302,
      "height": 324,
      "useSequence": true,
      "sequenceSpeed": 80,
      "scrollWithPage": false,
      "posX": -27,
      "mobile": {
        "width": 285,
        "posX": -136
      }
    }
  },
  "boxStyles": {
    "mediaBox": {
      "borderColor": "#181056",
      "borderWidth": 1,
      "bgColor": "#cccccc",
      "shadowColor": "#FF95CA",
      "maxWidth": 809,
      "maxHeight": 630,
      "bgOpacity": 42,
      "shadowOpacity": 0,
      "mobile": {
        "maxWidth": 333,
        "maxHeight": 596
      }
    },
    "manifestoBox": {
      "borderColor": "#661414",
      "borderWidth": 1,
      "bgColor": "#cccccc",
      "shadowColor": "rgba(0,0,0,0.8)",
      "bgOpacity": 43,
      "shadowOpacity": 0
    },
    "actionBox": {
      "borderColor": "#1a1a1a",
      "borderWidth": 2,
      "bgColor": "#fff8e7",
      "shadowColor": "rgba(0,0,0,0.8)",
      "bgOpacity": 100,
      "shadowOpacity": 80
    },
    "locationsBox": {
      "borderColor": "#1a1a1a",
      "borderWidth": 2,
      "bgColor": "#FFF8E7",
      "shadowColor": "rgba(0,0,0,0.8)",
      "bgOpacity": 100,
      "shadowOpacity": 80
    },
    "supportersBox": {
      "borderColor": "#1a1a1a",
      "borderWidth": 2,
      "bgColor": "#E7F0FF",
      "shadowColor": "rgba(0,0,0,0.8)",
      "bgOpacity": 80,
      "shadowOpacity": 80
    },
    "footerBox": {
      "borderColor": "#7e1111",
      "borderWidth": 1,
      "bgColor": "#FF00A0",
      "shadowColor": "rgba(0,0,0,0.8)",
      "bgOpacity": 100,
      "shadowOpacity": 0
    },
    "dashedBorder": {
      "color": "#822626",
      "width": 2,
      "dashLength": 23,
      "gapLength": 20
    },
    "downloadsBox": {
      "borderColor": "#1a1a1a",
      "borderWidth": 2,
      "bgColor": "#e7f0ff",
      "bgOpacity": 100,
      "shadowColor": "#000000",
      "shadowOpacity": 80
    }
  },
  "instagramLink": "https://www.instagram.com/gg_dove/",
  "hero": {
    "title": {
      "id": "hero-title",
      "type": "richtext",
      "content": "<font face=\"ChenYuluoyan\" size=\"7\" color=\"#000000\"><i style=\"\">RE.VIEW TAIWAN</i></font>",
      "displayMode": "image",
      "imageUrl": "https://duk.tw/KzIOgn.png",
      "imageWidth": 500,
      "imageHeight": 200,
      "style": {
        "rotation": 0,
        "imageEffect": "flicker",
        "imageEffectStrength": 22
      },
      "keepRatio": true,
      "mobile": {
        "imageWidth": 500,
        "keepRatio": true,
        "imageHeight": 200,
        "content": "<font face=\"ChenYuluoyan\" size=\"7\" color=\"#000000\"><i style=\"\">RE.VIEW TAIWAN</i></font>",
        "style": {
          "offsetY": 33
        }
      }
    },
    "subtitle": {
      "id": "hero-subtitle",
      "type": "richtext",
      "content": "<font color=\"#6b0b0b\" size=\"6\">反擊張文</font><div><font color=\"#6b0b0b\" size=\"6\"> \n一起搭建些有趣的視角吧!</font></div>",
      "displayMode": "text",
      "imageUrl": "",
      "imageWidth": 300,
      "imageHeight": 0,
      "style": {
        "fontSize": "text-2xl",
        "color": "#000000",
        "rotation": 1
      },
      "mobile": {
        "content": "<font color=\"#6b0b0b\" size=\"6\">反擊張文&nbsp;</font><div><span style=\"color: rgb(107, 11, 11); font-size: xx-large;\">一起搭建些有趣的視角吧!</span></div>"
      }
    },
    "mediaItems": [
      {
        "id": "hero-media-0",
        "type": "media",
        "content": "https://duk.tw/HLIWOE.png",
        "mediaType": "image",
        "mobile": {
          "content": "https://duk.tw/bBH4oX.png"
        }
      },
      {
        "id": "hero-media-1766508809794",
        "type": "media",
        "content": "https://picsum.photos/seed/1766508809794/800/800",
        "mediaType": "image",
        "mobile": {
          "content": "https://duk.tw/6NC6Lb.jpg"
        }
      },
      {
        "id": "hero-media-1766457553054",
        "type": "media",
        "content": "https://duk.tw/0oSHba.jpg",
        "mediaType": "image"
      },
      {
        "id": "hero-media-1766475469376",
        "type": "media",
        "content": "https://duk.tw/fVbTF8.jpg",
        "mediaType": "image",
        "mobile": {
          "content": "https://duk.tw/6Ghhce.jpg"
        }
      },
      {
        "id": "hero-media-1766508828003",
        "type": "media",
        "content": "https://picsum.photos/seed/1766508828003/800/800",
        "mediaType": "image",
        "mobile": {
          "content": "https://duk.tw/fVbTF8.jpg"
        }
      },
      {
        "id": "hero-media-1766509036554",
        "type": "media",
        "content": "https://picsum.photos/seed/1766509036554/800/800",
        "mediaType": "image",
        "mobile": {
          "content": "https://duk.tw/iYshCc.png"
        }
      }
    ],
    "currentMediaIndex": 2
  },
  "manifesto": {
    "paragraphs": [
      {
        "id": "p1",
        "type": "richtext",
        "content": "<pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><br style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">【Re:View Taiwan 】\n \n因北</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">捷事故的關係  \n最近搭捷運時，\n你是否也感受到了\n那股緊繃的氛圍？ \n看到台灣社會\n開始草木皆兵的狀態相當難受，\n</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">也思考著藝術家的身份\n能夠做些什</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">麼。\n \n曾看過許多藝術家\n在捷運、</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">火車上\n為陌生人繪製似顏繪\n或速</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">寫的影片，\n這種人與人溫暖互動的畫面\n漸漸地</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">越來越稀缺。\n人們總專注盯著眼前的小螢幕，\n而忽略周遭。 \n如今因北捷的事故</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">，\n在相互提醒下\n大家雖開始放下手機觀察四周，\n但在恐懼的濾鏡下\n我們看到的彼此\n卻是一個個潛在的敵人。 \n\n我希望人們視線尋找的\n不是敵人，\n而是有趣的朋友、夥伴。 \n如果藝術作為一種社會雕塑\n意味著我們能用行動</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">\n去形塑社會的樣貌，\n我希望能雕塑一份「信任」。\n我懷念那些畫</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">家\n在車廂裡\n為陌生人速寫，\n最後送給對方時\n收穫的驚喜與微笑。\n \n</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">因此我決定發起\n【Re:View Taiwan重新觀看行動】 \n我自費製作了首批 1,000 枚徽章，\n想</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">邀請您在通勤時戴上它。  \n簡單來說這枚徽章\n就是一張\n「友善的通行證」 或\n「Ｅ人徽章</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><br style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"></font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">」\n\n\n當人們相視到彼此的徽章時，\n會知道彼此\n是希望且可以友善交流的對象， \n</font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">甚至可以為對方畫一幅畫\n也不會感到尷尬或奇怪。\n \n這是一個整體社會\n關於「看見」的重新練習。 \n\n\n我是<br style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"></font></pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><font face=\"ChenYuluoyan\" size=\"6\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">GGdove \n這是我對張文的一點點反擊。</font></pre></pre>",
        "style": {
          "fontSize": "text-xl",
          "color": "#000000",
          "rotation": 0
        },
        "mobile": {
          "content": "<pre><font face=\"ChenYuluoyan\" size=\"5\"><br>【Re:View Taiwan </font>】</pre><pre><font face=\"ChenYuluoyan\" size=\"5\"> \n因北捷事故的關係  \n最近搭捷運時，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">你是否也感受到了</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">那股緊繃的氛圍？ \n看到台灣社會</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">開始草木皆兵的狀態相當難受，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">也思考著藝術家的身份</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">能夠做些什麼。</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\"> \n曾看過許多藝術家</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">在捷運、火車上</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">為陌生人繪製似顏繪</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">或速寫的影片，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">這種人與人溫暖互動的畫面</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">漸漸地越來越稀缺。</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">人們總專注盯著眼前的小螢幕，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">而忽略周遭。 \n如今因北捷的事故，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">在相互提醒下</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">大家雖開始放下手機觀察四周，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">但在恐懼的濾鏡下</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">我們看到的彼此</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">卻是一個個潛在的敵人。 </font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">\n我希望人們視線尋找的</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">不是敵人，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">而是有趣的朋友、夥伴。 \n如果藝術作為一種社會雕塑</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">意味著我們能用行動</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">去形塑社會的樣貌，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">我希望能雕塑一份「信任」。</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">我懷念那些畫家</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">在車廂裡</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">為陌生人速寫，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">最後送給對方時</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">收穫的驚喜與微笑。</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\"> \n因此我決定發起</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">【Re:View Taiwan重新觀看行動】 \n我自費製作了首批 1,000 枚徽章，</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">想邀請您在通勤時戴上它。  \n簡單來說這枚徽章</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">就是一張</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">「友善的通行證」 或</font></pre><pre><pre style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ; font-size: medium;\"><font face=\"ChenYuluoyan\" size=\"5\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">「Ｅ人徽章」</font></pre><font face=\"ChenYuluoyan\" size=\"5\"><pre><font face=\"ChenYuluoyan\" size=\"5\"><br></font></pre>當人們相視到彼此的徽章時，</font></pre><pre><span style=\"font-family: ChenYuluoyan; font-size: x-large;\">會知道彼此</span></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">是希望且可以友善交流的對象， \n甚至可以為對方畫一幅畫</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">也不會感到尷尬或奇怪。</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\"> </font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">這是一個整體社會</font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">關於「看見」的重新練習。 \n<br></font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">我是GGdove </font></pre><pre><font face=\"ChenYuluoyan\" size=\"5\">這是我對張文的一點點反擊。 </font></pre>",
          "style": {
            "fontSizePx": 15,
            "fontSize": ""
          }
        }
      },
      {
        "id": "p2",
        "type": "richtext",
        "content": "<br>",
        "style": {
          "fontSize": "text-xl",
          "color": "#000000",
          "rotation": 0.5
        },
        "mobile": {
          "content": "<br>"
        }
      },
      {
        "id": "p3",
        "type": "richtext",
        "content": "<br>",
        "style": {
          "fontSize": "text-xl",
          "color": "#000000",
          "rotation": -0.5
        },
        "mobile": {
          "content": "<br>"
        }
      }
    ]
  },
  "actions": {
    "title": {
      "id": "actions-title",
      "type": "richtext",
      "content": "12/28\n歡迎前往台北車站廣場\n一起參加似顏繪的快閃活動",
      "displayMode": "text",
      "imageUrl": "",
      "imageWidth": 250,
      "imageHeight": 0,
      "style": {
        "fontSize": "text-4xl",
        "color": "#000000",
        "rotation": 1
      },
      "mobile": {
        "content": "<div style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><span style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ; font-size: x-large;\">12/28</span><br style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ; font-size: x-large;\"><span style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ; font-size: x-large;\">歡迎前往台北車站廣場</span></div><div style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><span style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ; font-size: x-large;\">一起參加似顏繪的快閃活動</span></div>"
      }
    },
    "items": [
      {
        "id": "a1",
        "type": "richtext",
        "content": "<font size=\"5\">索取胸章：我將自費製作並發送，索取地點整理於此。\n\n\n如果你／妳是店家\n歡迎聯繫我成為徽章放置地點</font>",
        "style": {
          "fontSize": "text-lg",
          "color": "#000000",
          "rotation": 0
        },
        "mobile": {
          "content": "<font size=\"5\">索取胸章：我將自費製作並發送，索取地點整理於此。</font><div><font size=\"5\"><br></font><div><font size=\"5\">如果你／妳是店家</font></div><div><font size=\"5\">歡迎聯繫我成為徽章放置地點</font></div></div>"
        }
      },
      {
        "id": "a2",
        "type": "richtext",
        "content": "<font size=\"5\">自行列印：我無償公開圖檔，歡迎自行下載列印。（於下方下載區）</font>",
        "style": {
          "fontSize": "text-lg",
          "color": "#000000",
          "rotation": 1
        },
        "mobile": {
          "content": "<font size=\"5\">自行列印：我無償公開圖檔，歡迎自行下載列印。（於下方下載區）</font><div><font size=\"5\"><br></font></div><div><br></div>"
        }
      },
      {
        "id": "a3",
        "type": "richtext",
        "content": "<div><font size=\"5\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">觀察，或許拿起筆繪畫，用眼、手代替手機捕捉這個世界。</font></div><div><font size=\"5\" style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\">並上傳Tag #ＲｅｖｉｅｗTaiwan。</font><div style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"><br style=\"--tw-scale-x: 1; --tw-scale-y: 1; --tw-pan-x: ; --tw-pan-y: ; --tw-pinch-zoom: ; --tw-scroll-snap-strictness: proximity; --tw-gradient-from-position: ; --tw-gradient-via-position: ; --tw-gradient-to-position: ; --tw-ordinal: ; --tw-slashed-zero: ; --tw-numeric-figure: ; --tw-numeric-spacing: ; --tw-numeric-fraction: ; --tw-ring-inset: ; --tw-ring-offset-width: 0px; --tw-ring-offset-color: #fff; --tw-ring-color: rgb(59 130 246 / 0.5); --tw-ring-offset-shadow: 0 0 #0000; --tw-ring-shadow: 0 0 #0000; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000; --tw-blur: ; --tw-brightness: ; --tw-contrast: ; --tw-grayscale: ; --tw-hue-rotate: ; --tw-invert: ; --tw-saturate: ; --tw-sepia: ; --tw-drop-shadow: ; --tw-backdrop-blur: ; --tw-backdrop-brightness: ; --tw-backdrop-contrast: ; --tw-backdrop-grayscale: ; --tw-backdrop-hue-rotate: ; --tw-backdrop-invert: ; --tw-backdrop-opacity: ; --tw-backdrop-saturate: ; --tw-backdrop-sepia: ; --tw-contain-size: ; --tw-contain-layout: ; --tw-contain-paint: ; --tw-contain-style: ;\"></div></div>",
        "style": {
          "fontSize": "text-lg",
          "color": "#000000",
          "rotation": -1
        },
        "mobile": {
          "content": "<font size=\"5\">在通勤時觀察，也或許拿起筆繪畫，用眼、手代替手機捕捉這個世界。並上傳Tag #ＲｅｖｉｅｗTaiwan。</font><div><br></div>"
        }
      }
    ]
  },
  "locations": {
    "title": {
      "id": "locations-title",
      "type": "richtext",
      "content": "索取徽章地點",
      "displayMode": "text",
      "imageUrl": "",
      "imageWidth": 250,
      "imageHeight": 0,
      "style": {
        "fontSize": "text-4xl",
        "color": "#000000",
        "rotation": -1
      },
      "mobile": {
        "content": "<font color=\"#500f0f\">索取徽章地點</font>"
      }
    },
    "items": [
      {
        "id": "loc3",
        "name": "＿＿",
        "address": "",
        "note": ""
      },
      {
        "id": "loc-1766508885317",
        "name": "台北車站廣場",
        "address": "地址...",
        "note": "備註..."
      },
      {
        "id": "loc-1766508905918",
        "name": "＿＿",
        "address": "地址...",
        "note": "備註..."
      }
    ]
  },
  "supporters": {
    "title": {
      "id": "supporters-title",
      "type": "richtext",
      "content": "贊助廠商 / 參與藝術家",
      "displayMode": "text",
      "imageUrl": "",
      "imageWidth": 300,
      "imageHeight": 0,
      "style": {
        "fontSize": "text-4xl",
        "color": "#000000",
        "rotation": 1
      },
      "mobile": {
        "content": "<font color=\"#500f0f\">贊助廠商 / 參與藝術家</font>"
      }
    },
    "sponsors": [
      {
        "id": "sp-1766474925718",
        "name": "用心設計印刷有限公司",
        "logo": "",
        "url": ""
      },
      {
        "id": "sp-1766475026450",
        "name": "千葉印刷社",
        "logo": "",
        "url": "https://a083149.wixsite.com/cyprint"
      }
    ],
    "artists": [
      {
        "id": "art1",
        "name": "GGdove",
        "avatar": "https://duk.tw/VnArn0.png",
        "url": "https://www.instagram.com/gg_dove/"
      }
    ]
  },
  "footer": {
    "contact": {
      "id": "footer-contact",
      "type": "richtext",
      "content": "12/28 週日 台北車站快閃行動，聯絡 GGdove 參與。",
      "style": {
        "fontSize": "text-lg",
        "color": "#FFFFFF",
        "rotation": 0
      },
      "mobile": {
        "content": "12/28 週日 台北車站快閃行動，聯絡 GGdove 參與。"
      }
    },
    "hashtags": {
      "id": "footer-hashtags",
      "type": "richtext",
      "content": "#ReviewTaiwan #社會雕塑 #重新觀看行動",
      "style": {
        "fontSize": "text-2xl",
        "color": "#000000",
        "opacity": 100
      },
      "mobile": {
        "content": "#ReviewTaiwan #社會雕塑 \n#重新觀看行動"
      }
    }
  },
  "downloads": {
    "title": {
      "id": "downloads-title",
      "type": "richtext",
      "content": "圖檔下載",
      "style": {
        "fontSize": "text-4xl",
        "color": "#000000",
        "rotation": -1
      },
      "mobile": {
        "content": "<font color=\"#500f0f\">圖檔下載</font>"
      }
    },
    "items": [
      {
        "id": "dl2",
        "name": "徽章圖檔",
        "url": "https://drive.google.com/drive/folders/1jTkVf3idXhvugGxult02lHIQJaKCYVC_?usp=sharing",
        "description": ""
      }
    ]
  }
};

    // ============ 狀態管理 ============
    let siteData = JSON.parse(localStorage.getItem('drawme_data_v14')) || JSON.parse(JSON.stringify(INITIAL_DATA));
    // 補充左側動畫區域
    if (!siteData.decoration?.leftAnimation) {
      siteData.decoration.leftAnimation = JSON.parse(JSON.stringify(INITIAL_DATA.decoration.leftAnimation));
    }
    if (!siteData.decoration) siteData.decoration = JSON.parse(JSON.stringify(INITIAL_DATA.decoration));
    if (!siteData.settings) siteData.settings = JSON.parse(JSON.stringify(INITIAL_DATA.settings));
    // 補充 pageTitle / 分享文字 / favicon（含舊資料遷移）
    const OLD_DEFAULT_TITLE = 'RE:VIEW Taiwan - 重新觀看行動';
    const NEW_DEFAULT_TITLE = INITIAL_DATA.settings.pageTitle;
    if (!siteData.settings.pageTitle) siteData.settings.pageTitle = NEW_DEFAULT_TITLE;
    if (siteData.settings.pageTitle === OLD_DEFAULT_TITLE) siteData.settings.pageTitle = NEW_DEFAULT_TITLE;
    if (siteData.settings.mobile?.pageTitle === OLD_DEFAULT_TITLE) siteData.settings.mobile.pageTitle = NEW_DEFAULT_TITLE;

    if (siteData.settings.shareTitle === undefined) siteData.settings.shareTitle = siteData.settings.pageTitle || NEW_DEFAULT_TITLE;
    if (!siteData.settings.shareTitle) siteData.settings.shareTitle = siteData.settings.pageTitle || NEW_DEFAULT_TITLE;
    if (siteData.settings.shareTitle === OLD_DEFAULT_TITLE) siteData.settings.shareTitle = NEW_DEFAULT_TITLE;

    if (siteData.settings.shareDescription === undefined) siteData.settings.shareDescription = siteData.settings.shareTitle || (siteData.settings.pageTitle || NEW_DEFAULT_TITLE);
    if (!siteData.settings.shareDescription) siteData.settings.shareDescription = siteData.settings.shareTitle || (siteData.settings.pageTitle || NEW_DEFAULT_TITLE);
    if (siteData.settings.shareDescription === OLD_DEFAULT_TITLE) siteData.settings.shareDescription = NEW_DEFAULT_TITLE;

    if (siteData.settings.shareImage === undefined) siteData.settings.shareImage = '';
    if (siteData.settings.favicon === undefined) siteData.settings.favicon = '';
    // 補充左側動畫序列設定
    if (siteData.decoration?.leftAnimation) {
      if (siteData.decoration.leftAnimation.useSequence === undefined) siteData.decoration.leftAnimation.useSequence = true;
      if (siteData.decoration.leftAnimation.sequenceSpeed === undefined) siteData.decoration.leftAnimation.sequenceSpeed = 80;
      if (siteData.decoration.leftAnimation.scrollWithPage === undefined) siteData.decoration.leftAnimation.scrollWithPage = false;
    }
    if (!siteData.boxStyles) siteData.boxStyles = JSON.parse(JSON.stringify(INITIAL_DATA.boxStyles));
    // 補充缺少的 shadowColor 和新區塊樣式
    ['mediaBox', 'manifestoBox', 'actionBox', 'locationsBox', 'supportersBox', 'footerBox', 'downloadsBox'].forEach(key => {
      if (!siteData.boxStyles[key]) {
        siteData.boxStyles[key] = JSON.parse(JSON.stringify(INITIAL_DATA.boxStyles[key]));
      } else if (!siteData.boxStyles[key].shadowColor) {
        siteData.boxStyles[key].shadowColor = 'rgba(0,0,0,0.8)';
      }
    });
    if (!siteData.instagramLink) siteData.instagramLink = INITIAL_DATA.instagramLink;
    // 新增地點和贊助者區塊
    if (!siteData.locations) siteData.locations = JSON.parse(JSON.stringify(INITIAL_DATA.locations));
    if (!siteData.supporters) siteData.supporters = JSON.parse(JSON.stringify(INITIAL_DATA.supporters));
    // 新增 footer hashtags
    if (!siteData.footer?.hashtags) {
      if (!siteData.footer) siteData.footer = {};
      siteData.footer.hashtags = JSON.parse(JSON.stringify(INITIAL_DATA.footer.hashtags));
    }
    // 新增下載區塊
    if (!siteData.downloads) siteData.downloads = JSON.parse(JSON.stringify(INITIAL_DATA.downloads));
    // 補充圓形圖透明度
    if (siteData.decoration?.circleImage?.style && siteData.decoration.circleImage.style.opacity === undefined) {
      siteData.decoration.circleImage.style.opacity = 30;
    }
    // 補充 boxStyles 的透明度設定
    ['mediaBox', 'manifestoBox', 'actionBox', 'locationsBox', 'supportersBox', 'footerBox', 'downloadsBox'].forEach(key => {
      if (siteData.boxStyles[key]) {
        if (siteData.boxStyles[key].bgOpacity === undefined) siteData.boxStyles[key].bgOpacity = 100;
        if (siteData.boxStyles[key].shadowOpacity === undefined) siteData.boxStyles[key].shadowOpacity = 80;
        if (siteData.boxStyles[key].shadowColor === undefined) siteData.boxStyles[key].shadowColor = '#000000';
      }
    });
    // 舊版資料遷移：mainMedia -> mediaItems
    if (siteData.hero.mainMedia && !siteData.hero.mediaItems) {
      siteData.hero.mediaItems = [siteData.hero.mainMedia];
      siteData.hero.currentMediaIndex = 0;
      delete siteData.hero.mainMedia;
    }
    if (!siteData.hero.mediaItems) siteData.hero.mediaItems = JSON.parse(JSON.stringify(INITIAL_DATA.hero.mediaItems));
    if (siteData.hero.currentMediaIndex === undefined) siteData.hero.currentMediaIndex = 0;

    // 文字元件：預設建立 mobile.content，確保桌機/手機「格式」可獨立編輯
    function ensureTextElementsMobileContent(node) {
      if (!node || typeof node !== 'object') return;
      if (Array.isArray(node)) {
        node.forEach(ensureTextElementsMobileContent);
        return;
      }

      const type = node.type;
      if ((type === 'richtext' || type === 'text') && typeof node.content === 'string') {
        if (!node.mobile) node.mobile = {};
        if (node.mobile.content === undefined) node.mobile.content = node.content;
      }

      Object.values(node).forEach(ensureTextElementsMobileContent);
    }
    ensureTextElementsMobileContent(siteData);

    const IS_PREVIEW = new URLSearchParams(location.search).get('preview') === '1';

    let isAdmin = false;
    let activeElementId = null;
    let savedSelection = null; // 保存選取範圍
    let manifestoExpanded = false;

    function expandManifesto(e) {
      if (e) {
        const link = (e.target && typeof e.target.closest === 'function') ? e.target.closest('a') : null;
        if (link) e.preventDefault();
        e.stopPropagation();
      }

      manifestoExpanded = true;
      const content = document.getElementById('manifesto-content');
      if (!content) {
        render();
        return;
      }
      if (content.classList.contains('manifesto-expanded') || content.classList.contains('manifesto-expanding')) return;

      const fullHeight = content.scrollHeight || 0;
      content.classList.remove('manifesto-collapsed');
      content.classList.add('manifesto-expanding');
      if (Number.isFinite(fullHeight) && fullHeight > 0) content.style.maxHeight = `${Math.round(fullHeight)}px`;

      const more = content.querySelector('.manifesto-more');
      if (more) more.classList.add('manifesto-more-hidden');

      window.setTimeout(() => {
        const target = document.getElementById('manifesto-content');
        if (!target) return;
        target.classList.remove('manifesto-expanding');
        target.classList.add('manifesto-expanded');
        target.style.maxHeight = '';
        const moreEl = target.querySelector('.manifesto-more');
        if (moreEl) moreEl.remove();
      }, 680);
    }

    // ============ 裝置模式（桌機/手機）============
    const DEVICE_MODE_KEY = 'drawme_device_mode_v1'; // auto | desktop | mobile
    const MOBILE_BREAKPOINT_PX = 768;
    let deviceMode = localStorage.getItem(DEVICE_MODE_KEY) || 'auto';
    const MOBILE_PREVIEW_ENABLED_KEY = 'drawme_mobile_preview_enabled_v1';
    const MOBILE_PREVIEW_SCALE_KEY = 'drawme_mobile_preview_scale_v1';
    let mobilePreviewEnabled = (localStorage.getItem(MOBILE_PREVIEW_ENABLED_KEY) ?? '1') !== '0';
    let mobilePreviewScale = parseFloat(localStorage.getItem(MOBILE_PREVIEW_SCALE_KEY) || '0.85');
    if (!Number.isFinite(mobilePreviewScale) || mobilePreviewScale < 0.5 || mobilePreviewScale > 1) mobilePreviewScale = 0.85;

    function getViewportDevice() {
      return window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT_PX}px)`).matches ? 'mobile' : 'desktop';
    }

    function getActiveDevice() {
      if (deviceMode === 'desktop' || deviceMode === 'mobile') return deviceMode;
      return getViewportDevice();
    }

    function setDeviceMode(mode) {
      deviceMode = mode;
      localStorage.setItem(DEVICE_MODE_KEY, mode);
      if (mode === 'mobile') {
        mobilePreviewEnabled = true;
        localStorage.setItem(MOBILE_PREVIEW_ENABLED_KEY, '1');
      }
      applyStyles();
      render();
      if (typeof initCursor === 'function') initCursor();
    }

    // 自動模式下，跨過斷點才重繪（避免 resize 時一直重繪）
    let lastViewportDevice = getViewportDevice();
    window.addEventListener('resize', () => {
      if (deviceMode !== 'auto') return;
      const next = getViewportDevice();
      if (next !== lastViewportDevice) {
        lastViewportDevice = next;
        applyStyles();
        render();
        if (typeof initCursor === 'function') initCursor();
      }
    });

    window.addEventListener('storage', (e) => {
      if (!e.key) return;

      if (e.key === 'drawme_data_v14') {
        if (!e.newValue) {
          siteData = JSON.parse(JSON.stringify(INITIAL_DATA));
        } else {
          try {
            siteData = JSON.parse(e.newValue);
          } catch {
            return;
          }
        }
        applyStyles();
        render();
        if (typeof initCursor === 'function') initCursor();
        return;
      }

      if (e.key === DEVICE_MODE_KEY) {
        deviceMode = e.newValue || 'auto';
        applyStyles();
        render();
        if (typeof initCursor === 'function') initCursor();
        return;
      }

      if (e.key === MOBILE_PREVIEW_ENABLED_KEY) {
        mobilePreviewEnabled = (e.newValue ?? '1') !== '0';
        updateMobilePreviewOverlay();
        return;
      }

      if (e.key === MOBILE_PREVIEW_SCALE_KEY) {
        const next = parseFloat(e.newValue || '');
        if (Number.isFinite(next)) {
          mobilePreviewScale = Math.max(0.5, Math.min(1, next));
          const root = document.getElementById('mobile-preview-overlay');
          if (root) root.style.setProperty('--preview-scale', String(mobilePreviewScale));
        }
      }
    });

    function getResponsiveObject(obj) {
      if (!obj || typeof obj !== 'object') return obj;
      if (getActiveDevice() !== 'mobile') return obj;
      if (!obj.mobile || typeof obj.mobile !== 'object') return obj;
      return { ...obj, ...obj.mobile };
    }

    function getResponsiveElement(el) {
      if (!el || typeof el !== 'object') return el;
      if (getActiveDevice() !== 'mobile') return el;
      if (!el.mobile || typeof el.mobile !== 'object') return el;
      const merged = { ...el, ...el.mobile };
      // id/type 不做裝置覆寫
      merged.id = el.id;
      merged.type = el.type;
      merged.style = { ...(el.style || {}), ...(el.mobile.style || {}) };
      return merged;
    }

    const LEGACY_CIRCLE_OPACITY_DEFAULT = 30;
    function getCircleImageOpacityPercent(circleEl) {
      const style = (circleEl && circleEl.style) ? circleEl.style : {};
      const edited = style.opacityEdited === true;
      const n = parseFloat(style.opacity);
      if (!Number.isFinite(n)) return LEGACY_CIRCLE_OPACITY_DEFAULT;
      if (!edited && n === 100) return LEGACY_CIRCLE_OPACITY_DEFAULT;
      return Math.max(0, Math.min(100, n));
    }

    function renderDeviceModeControls() {
      const resolved = getActiveDevice();
      const resolvedLabel = resolved === 'mobile' ? '手機' : '桌機';
      return `
        <div class="px-4 py-3 border-b border-black/10">
          <div class="flex items-center justify-between mb-2">
            <div class="text-xs font-bold">編輯/預覽裝置：${resolvedLabel}${deviceMode === 'auto' ? '（自動）' : ''}</div>
            <div class="text-[11px] text-gray-500">≤${MOBILE_BREAKPOINT_PX}px 為手機</div>
          </div>
          <div class="flex gap-2">
            <button class="flex-1 py-2 rounded ${deviceMode === 'auto' ? 'bg-black text-white' : 'bg-gray-200'}" onclick="setDeviceMode('auto')">自動</button>
            <button class="flex-1 py-2 rounded ${deviceMode === 'desktop' ? 'bg-black text-white' : 'bg-gray-200'}" onclick="setDeviceMode('desktop')">桌機</button>
            <button class="flex-1 py-2 rounded ${deviceMode === 'mobile' ? 'bg-black text-white' : 'bg-gray-200'}" onclick="setDeviceMode('mobile')">手機</button>
          </div>
          ${deviceMode === 'mobile' ? `
            <div class="mt-2 flex gap-2">
              <button class="flex-1 py-2 rounded ${mobilePreviewEnabled ? 'bg-blue-500 text-white' : 'bg-gray-200'}" onclick="setMobilePreviewEnabled(${mobilePreviewEnabled ? 'false' : 'true'})">
                ${mobilePreviewEnabled ? '關閉手機預覽' : '開啟手機預覽'}
              </button>
            </div>
            <div class="mt-1 text-[11px] text-gray-500">手機預覽以 390px 寬度模擬（不影響桌機畫面）</div>
          ` : ''}
        </div>
      `;
    }

    function clearElementMobileOverrides(id) {
      const el = findElement(id);
      if (el && el.mobile) {
        delete el.mobile;
        saveData();
      }
    }

    function clearBoxStyleMobileOverrides(boxName) {
      if (siteData.boxStyles && siteData.boxStyles[boxName] && siteData.boxStyles[boxName].mobile) {
        delete siteData.boxStyles[boxName].mobile;
        saveData();
      }
    }

    function clearBackgroundMobileOverrides() {
      if (siteData.background && siteData.background.mobile) {
        delete siteData.background.mobile;
        saveData();
      }
    }

    function clearSettingsMobileOverrides() {
      if (siteData.settings && siteData.settings.mobile) {
        delete siteData.settings.mobile;
        saveData();
      }
    }

    // ============ 手機預覽（iframe 模擬手機寬度）============
    function setMobilePreviewEnabled(enabled) {
      mobilePreviewEnabled = !!enabled;
      localStorage.setItem(MOBILE_PREVIEW_ENABLED_KEY, mobilePreviewEnabled ? '1' : '0');
      render();
    }

    function setMobilePreviewScale(scale) {
      const next = Math.max(0.5, Math.min(1, parseFloat(scale) || 0.85));
      mobilePreviewScale = next;
      localStorage.setItem(MOBILE_PREVIEW_SCALE_KEY, String(next));
      const root = document.getElementById('mobile-preview-overlay');
      if (root) root.style.setProperty('--preview-scale', String(next));
    }

    function getMobilePreviewUrl() {
      const url = new URL(location.href);
      url.searchParams.set('preview', '1');
      return url.toString();
    }

    function ensureMobilePreviewOverlay() {
      if (IS_PREVIEW) return null;
      let root = document.getElementById('mobile-preview-overlay');
      if (!root) {
        root = document.createElement('div');
        root.id = 'mobile-preview-overlay';
        document.body.appendChild(root);
      }
      if (root.dataset.inited === '1') return root;
      root.dataset.inited = '1';
      root.style.setProperty('--preview-scale', String(mobilePreviewScale));

      const panel = document.createElement('div');
      panel.className = 'mobile-preview-panel';

      const header = document.createElement('div');
      header.className = 'mobile-preview-header';
      header.innerHTML = `
        <div class="mobile-preview-title">手機預覽</div>
        <div class="mobile-preview-tools">
          <span>縮放</span>
          <input type="range" min="0.5" max="1" step="0.05" value="${mobilePreviewScale}">
          <button type="button" class="mobile-preview-close" title="關閉" aria-label="關閉">×</button>
        </div>
      `;

      const iframe = document.createElement('iframe');
      iframe.className = 'mobile-preview-iframe';
      iframe.title = '手機預覽';
      iframe.loading = 'lazy';
      iframe.src = getMobilePreviewUrl();

      panel.appendChild(header);
      panel.appendChild(iframe);
      root.appendChild(panel);

      const range = header.querySelector('input[type="range"]');
      range?.addEventListener('input', () => setMobilePreviewScale(range.value));
      const closeBtn = header.querySelector('.mobile-preview-close');
      closeBtn?.addEventListener('click', () => setMobilePreviewEnabled(false));

      return root;
    }

    function updateMobilePreviewOverlay() {
      if (IS_PREVIEW) return;
      const root = document.getElementById('mobile-preview-overlay');
      const shouldShow = isAdmin && deviceMode === 'mobile' && mobilePreviewEnabled;
      if (!shouldShow) {
        if (root) root.style.display = 'none';
        return;
      }
      const overlay = ensureMobilePreviewOverlay();
      if (!overlay) return;
      overlay.style.setProperty('--preview-scale', String(mobilePreviewScale));
      overlay.style.display = 'block';
    }

    function saveData() {
      if (!IS_PREVIEW) localStorage.setItem('drawme_data_v14', JSON.stringify(siteData));
      // 保存側邊欄和頁面滾動位置
      const sidebar = document.querySelector('.sidebar .overflow-y-auto');
      const sidebarScrollTop = sidebar ? sidebar.scrollTop : 0;
      const pageScrollTop = window.scrollY;
      applyStyles();
      render();
      // 恢復滾動位置
      requestAnimationFrame(() => {
        const newSidebar = document.querySelector('.sidebar .overflow-y-auto');
        if (newSidebar) newSidebar.scrollTop = sidebarScrollTop;
        window.scrollTo(0, pageScrollTop);
      });
    }

    function updateInstagramLink(url) {
      siteData.instagramLink = url;
      saveData();
    }

    // ============ 地點管理 ============
    function addLocation() {
      const newId = 'loc-' + Date.now();
      siteData.locations.items.push({ id: newId, name: '新地點', address: '地址...', note: '備註...' });
      saveData();
    }

    function updateLocation(index, field, value) {
      siteData.locations.items[index][field] = value;
      saveData();
    }

    function removeLocation(index) {
      if (siteData.locations.items.length > 1) {
        siteData.locations.items.splice(index, 1);
        saveData();
      } else {
        alert('至少需要保留一個地點！');
      }
    }

    // ============ 贊助商管理 ============
    function addSponsor() {
      const newId = 'sp-' + Date.now();
      siteData.supporters.sponsors.push({ id: newId, name: '贊助商名稱', logo: 'https://picsum.photos/seed/' + Date.now() + '/200/100', url: '' });
      saveData();
    }

    function updateSponsor(index, field, value) {
      siteData.supporters.sponsors[index][field] = value;
      saveData();
    }

    function removeSponsor(index) {
      siteData.supporters.sponsors.splice(index, 1);
      saveData();
    }

    // ============ 藝術家管理 ============
    function addArtist() {
      const newId = 'art-' + Date.now();
      siteData.supporters.artists.push({ id: newId, name: '藝術家名稱', avatar: 'https://picsum.photos/seed/' + Date.now() + '/100/100', url: '' });
      saveData();
    }

    function updateArtist(index, field, value) {
      siteData.supporters.artists[index][field] = value;
      saveData();
    }

    function removeArtist(index) {
      siteData.supporters.artists.splice(index, 1);
      saveData();
    }

    // 下載項目管理
    function addDownload() {
      const newId = 'dl' + Date.now();
      siteData.downloads.items.push({ id: newId, name: '新下載項目', url: '', description: '' });
      saveData();
    }

    function updateDownload(index, field, value) {
      const item = siteData.downloads.items[index];
      if (!item) return;
      updateElement(item.id, { [field]: value });
    }

    function removeDownload(index) {
      siteData.downloads.items.splice(index, 1);
      saveData();
    }

    // 顏色轉換：hex + opacity -> rgba
    function hexToRgba(hex, opacity) {
      const h = hex.replace('#', '');
      const r = parseInt(h.substring(0, 2), 16);
      const g = parseInt(h.substring(2, 4), 16);
      const b = parseInt(h.substring(4, 6), 16);
      return 'rgba(' + r + ',' + g + ',' + b + ',' + (opacity / 100) + ')';
    }

    function applyStyles() {
      const bg = getResponsiveObject(siteData.background || INITIAL_DATA.background);
      const settings = getResponsiveObject(siteData.settings || INITIAL_DATA.settings);
      const font = settings?.englishFont || 'GarmentDistrict';
      document.body.style.backgroundColor = bg.color;
      document.body.style.fontFamily = `'${font}', 'ChenYuluoyan', sans-serif`;
      // 更新背景圖層
      let bgLayer = document.getElementById('bg-layer');
      if (!bgLayer) {
        bgLayer = document.createElement('div');
        bgLayer.id = 'bg-layer';
        bgLayer.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none;';
        document.body.prepend(bgLayer);
      }
      if (bg.image) {
        bgLayer.style.backgroundImage = `url('${bg.image}')`;
        bgLayer.style.backgroundSize = bg.size || 'auto';
        bgLayer.style.backgroundPosition = `${bg.posX ?? 50}% ${bg.posY ?? 50}%`;
        bgLayer.style.backgroundRepeat = bg.repeat || 'repeat';
        bgLayer.style.backgroundAttachment = bg.fixed ? 'fixed' : 'scroll';
        bgLayer.style.opacity = (bg.opacity ?? 100) / 100;
      } else {
        bgLayer.style.backgroundImage = 'none';
      }
      // 更新頁面標題
      const pageTitle = settings?.pageTitle || INITIAL_DATA.settings.pageTitle;
      if (pageTitle) document.title = pageTitle;
      // 更新分享預覽文字（OG/Twitter/Description）
      const shareBase = siteData.settings || INITIAL_DATA.settings;
      const shareTitle = (shareBase.shareTitle || shareBase.pageTitle || pageTitle || '').trim();
      const shareDescription = (shareBase.shareDescription || '').trim() || shareTitle;
      const upsertMeta = (attr, key, content) => {
        let meta = document.querySelector(`meta[${attr}="${key}"]`);
        if (!meta) {
          meta = document.createElement('meta');
          meta.setAttribute(attr, key);
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', content);
      };
      upsertMeta('name', 'description', shareDescription);
      upsertMeta('property', 'og:title', shareTitle);
      upsertMeta('property', 'og:description', shareDescription);
      upsertMeta('property', 'og:type', 'website');
      upsertMeta('name', 'twitter:card', 'summary');
      upsertMeta('name', 'twitter:title', shareTitle);
      upsertMeta('name', 'twitter:description', shareDescription);
      // 更新 favicon
      const favicon = settings?.favicon;
      let faviconLink = document.querySelector('link[rel="icon"]');
      if (favicon) {
        if (!faviconLink) {
          faviconLink = document.createElement('link');
          faviconLink.rel = 'icon';
          document.head.appendChild(faviconLink);
        }
        faviconLink.href = favicon;
      } else if (faviconLink) {
        faviconLink.remove();
      }

      syncHeroTitleImageEffects();
    }

    let heroTitleRippleRaf = null;
    let heroTitleRippleStart = 0;
    let heroTitleRippleLastUpdate = 0;

    function clampNumber(value, min, max, fallback) {
      const n = parseFloat(value);
      if (!Number.isFinite(n)) return fallback;
      return Math.max(min, Math.min(max, n));
    }

    function stopHeroTitleRipple() {
      if (heroTitleRippleRaf) cancelAnimationFrame(heroTitleRippleRaf);
      heroTitleRippleRaf = null;
    }

    function startHeroTitleRipple() {
      if (heroTitleRippleRaf) return;
      const turb = document.getElementById('fx-water-ripple-turbulence');
      const disp = document.getElementById('fx-water-ripple-displacement');
      if (!turb || !disp) return;

      heroTitleRippleStart = performance.now();
      heroTitleRippleLastUpdate = 0;

      const tick = (now) => {
        const title = getResponsiveElement(siteData.hero?.title);
        const type = String(title?.style?.imageEffect || 'none');
        if (type !== 'ripple') {
          stopHeroTitleRipple();
          return;
        }

        const speed = clampNumber(title?.style?.imageEffectSpeed, 0.5, 20, 8);
        const strength = clampNumber(title?.style?.imageEffectStrength, 0, 100, 60);
        const scale = Math.round(strength * 0.5); // 0-50
        disp.setAttribute('scale', String(scale));

        if (now - heroTitleRippleLastUpdate > 50) {
          const t = (now - heroTitleRippleStart) / 1000;
          const phase = (t / speed) * Math.PI * 2;
          const drift = 0.002 + (strength / 100) * 0.004;
          const fx = 0.010 + drift * Math.sin(phase);
          const fy = 0.020 + drift * Math.cos(phase);
          turb.setAttribute('baseFrequency', `${fx.toFixed(4)} ${fy.toFixed(4)}`);
          heroTitleRippleLastUpdate = now;
        }

        heroTitleRippleRaf = requestAnimationFrame(tick);
      };

      heroTitleRippleRaf = requestAnimationFrame(tick);
    }

    function syncHeroTitleImageEffects() {
      const title = getResponsiveElement(siteData.hero?.title);
      const type = String(title?.style?.imageEffect || 'none');
      if (type === 'ripple') startHeroTitleRipple();
      else stopHeroTitleRipple();
    }

    function findElement(id, obj = siteData) {
      if (!obj || typeof obj !== 'object') return null;
      if (obj.id === id) return obj;
      for (const key of Object.keys(obj)) {
        const found = findElement(id, obj[key]);
        if (found) return found;
      }
      return null;
    }

    function updateElement(id, updates) {
      const el = findElement(id);
      if (el) {
        const isMobileEdit = getActiveDevice() === 'mobile';
        const globalKeys = new Set(['id', 'type']);

        Object.entries(updates || {}).forEach(([key, val]) => {
          if (key === 'style') return;
          if (!isMobileEdit || globalKeys.has(key)) {
            el[key] = val;
          } else {
            if (!el.mobile) el.mobile = {};
            el.mobile[key] = val;
          }
        });

        if (updates && updates.style) {
          if (isMobileEdit) {
            if (!el.mobile) el.mobile = {};
            el.mobile.style = { ...(el.mobile.style || {}), ...updates.style };
          } else {
            el.style = { ...(el.style || {}), ...updates.style };
          }
        }
        saveData();
      }
    }

    function updateBackground(updates) {
      if (!siteData.background) {
        siteData.background = JSON.parse(JSON.stringify(INITIAL_DATA.background || {}));
      }
      if (getActiveDevice() === 'mobile') {
        if (!siteData.background.mobile) siteData.background.mobile = {};
        siteData.background.mobile = { ...siteData.background.mobile, ...updates };
      } else {
        siteData.background = { ...siteData.background, ...updates };
      }
      saveData();
    }

    function updateSettings(updates) {
      if (!siteData.settings) {
        siteData.settings = JSON.parse(JSON.stringify(INITIAL_DATA.settings || {}));
      }
      if (getActiveDevice() === 'mobile') {
        if (!siteData.settings.mobile) siteData.settings.mobile = {};
        siteData.settings.mobile = { ...siteData.settings.mobile, ...updates };
      } else {
        siteData.settings = { ...siteData.settings, ...updates };
      }
      saveData();
    }

    function updateSettingsGlobal(updates) {
      if (!siteData.settings) {
        siteData.settings = JSON.parse(JSON.stringify(INITIAL_DATA.settings || {}));
      }
      siteData.settings = { ...siteData.settings, ...(updates || {}) };
      saveData();
    }

    function updateBoxStyle(boxName, updates) {
      if (!siteData.boxStyles) siteData.boxStyles = {};
      if (!siteData.boxStyles[boxName]) {
        siteData.boxStyles[boxName] = JSON.parse(JSON.stringify(INITIAL_DATA.boxStyles[boxName] || {}));
      }
      if (getActiveDevice() === 'mobile') {
        if (!siteData.boxStyles[boxName].mobile) siteData.boxStyles[boxName].mobile = {};
        siteData.boxStyles[boxName].mobile = { ...siteData.boxStyles[boxName].mobile, ...updates };
      } else {
        siteData.boxStyles[boxName] = { ...siteData.boxStyles[boxName], ...updates };
      }
      saveData();
    }

    function getBoxStyle(boxName) {
      const base =
        (siteData.boxStyles && siteData.boxStyles[boxName])
          ? siteData.boxStyles[boxName]
          : (INITIAL_DATA.boxStyles ? INITIAL_DATA.boxStyles[boxName] : {});
      return getResponsiveObject(base || {});
    }

    function updateLeftAnimation(updates) {
      if (!siteData.decoration) siteData.decoration = {};
      if (!siteData.decoration.leftAnimation) {
        siteData.decoration.leftAnimation = JSON.parse(JSON.stringify(INITIAL_DATA.decoration?.leftAnimation || {}));
      }
      const target = siteData.decoration.leftAnimation;
      if (getActiveDevice() === 'mobile') {
        if (!target.mobile) target.mobile = {};
        target.mobile = { ...target.mobile, ...updates };
      } else {
        Object.assign(target, updates);
      }
      saveData();
    }

    function clearLeftAnimationMobileOverrides() {
      if (siteData.decoration?.leftAnimation?.mobile) {
        delete siteData.decoration.leftAnimation.mobile;
        saveData();
      }
    }

    // ============ 輪播功能 ============
    const CAROUSEL_AUTO_INTERVAL_MS = 5000;
    const CAROUSEL_FADE_MS = 350;
    let carouselAutoTimer = null;
    let carouselFadeTimer = null;
    let carouselIsAnimating = false;
    const carouselPreloadedUrls = new Set();
    const carouselReservedSizes = new Map(); // key -> { width, stageHeight }
    let carouselReserveInFlight = null;
    let carouselReserveInFlightKey = null;

    function getCarouselItems() {
      const items = siteData?.hero?.mediaItems;
      return Array.isArray(items) ? items : [];
    }

    function preloadCarouselImages() {
      if (isAdmin) return;
      const items = getCarouselItems();
      items.forEach(itemBase => {
        const spec = getCarouselMediaSpec(itemBase);
        if (spec.kind !== 'image' || !spec.url) return;
        if (carouselPreloadedUrls.has(spec.url)) return;
        carouselPreloadedUrls.add(spec.url);
        const img = new Image();
        img.decoding = 'async';
        img.loading = 'eager';
        img.src = spec.url;
      });
    }

    function getCarouselIndex() {
      const idx = siteData?.hero?.currentMediaIndex;
      return Number.isFinite(idx) ? idx : 0;
    }

    function getCarouselSlotEl() {
      return document.getElementById('hero-carousel-slot');
    }

    function getCarouselReserveKey() {
      const device = getActiveDevice();
      const boxStyle = getBoxStyle('mediaBox');
      const maxWidth = boxStyle.maxWidth || 0;
      const maxHeight = boxStyle.maxHeight || 0;
      return `${device}|${maxWidth}|${maxHeight}`;
    }

    function getCarouselContainerEl() {
      return document.getElementById('hero-carousel-container');
    }

    function getCarouselStageEl() {
      return document.getElementById('hero-carousel-stage');
    }

    function getCarouselMediaEl() {
      return document.getElementById('hero-carousel-media');
    }

    function getCarouselMediaSpec(itemBase) {
      const item = getResponsiveElement(itemBase || {});
      const content = String(item?.content || '');
      const youtubeId = getYouTubeId(content);
      if (youtubeId) {
        return {
          kind: 'youtube',
          url: content,
          html: `<iframe width="100%" height="450" src="https://www.youtube.com/embed/${youtubeId}" frameborder="0" allowfullscreen class="rounded block"></iframe>`
        };
      }

      const lower = content.toLowerCase();
      const isVideo = lower.includes('.mp4') || lower.includes('.webm');
      if (content && isVideo) {
        return {
          kind: 'video',
          url: content,
          html: `<video src="${content}" controls class="block max-w-full h-auto rounded"></video>`
        };
      }

      if (!content) {
        return {
          kind: 'image',
          url: '',
          html: `<div class="w-full h-64 bg-gray-200 rounded"></div>`
        };
      }

      return {
        kind: 'image',
        url: content,
        html: `<img src="${content}" alt="圖片" class="block max-w-full h-auto rounded">`
      };
    }

    function waitForCarouselLayerReady(layerEl, spec, timeoutMs = 2000) {
      if (!layerEl) return Promise.resolve();
      if (!spec || spec.kind !== 'image') return Promise.resolve();
      const imgs = Array.from(layerEl.querySelectorAll('img'));
      if (!imgs.length) return Promise.resolve();

      const timeout = (ms) => new Promise(resolve => setTimeout(resolve, ms));
      const waits = imgs.map(img => new Promise(resolve => {
        if (img.complete && img.naturalWidth > 0) return resolve();
        const done = () => {
          img.removeEventListener('load', done);
          img.removeEventListener('error', done);
          resolve();
        };
        img.addEventListener('load', done, { once: true });
        img.addEventListener('error', done, { once: true });
      }));

      return Promise.race([Promise.all(waits), timeout(timeoutMs)]);
    }

    async function measureCarouselSpecSize(spec, measureBase = null) {
      const container = getCarouselContainerEl();
      if (!container && !measureBase) return null;

      const parent = measureBase?.parent || container?.parentElement || document.body;
      const measure = document.createElement('div');
      const className = (measureBase && typeof measureBase.className === 'string') ? measureBase.className : (container ? container.className : '');
      if (className) measure.className = className;
      const styleText = (measureBase && typeof measureBase.styleText === 'string') ? measureBase.styleText : (container ? (container.getAttribute('style') || '') : '');
      if (styleText) measure.setAttribute('style', styleText);
      measure.style.position = 'absolute';
      measure.style.left = '-100000px';
      measure.style.top = '0';
      measure.style.visibility = 'hidden';
      measure.style.pointerEvents = 'none';
      measure.style.transform = 'none';
      measure.style.width = 'auto';
      measure.style.height = 'auto';
      measure.style.transition = 'none';
      measure.innerHTML = `<div class="carousel-stage"><div class="carousel-layer carousel-layer-current">${spec?.html || ''}</div></div>`;
      parent.appendChild(measure);

      await waitForCarouselLayerReady(measure, spec, 2000);

      const width = measure.offsetWidth || 0;
      const stageEl = measure.querySelector('.carousel-stage');
      const stageHeight = stageEl ? stageEl.getBoundingClientRect().height : 0;
      measure.remove();

      return { width, stageHeight };
    }

    function applyCarouselReservedSize(reserved) {
      const container = getCarouselContainerEl();
      const stage = getCarouselStageEl();
      if (!container || !stage || !reserved) return;

      const width = reserved.width;
      const stageHeight = reserved.stageHeight;

      if (Number.isFinite(width) && width > 0) container.style.width = `${Math.round(width)}px`;
      else container.style.width = '';

      if (Number.isFinite(stageHeight) && stageHeight > 0) stage.style.height = `${Math.round(stageHeight)}px`;
      else stage.style.height = '';
    }

    async function ensureCarouselReservedSize() {
      if (isAdmin) return null;
      const items = getCarouselItems();
      if (items.length <= 1) return null;

      const key = getCarouselReserveKey();
      const existing = carouselReservedSizes.get(key);
      if (existing) {
        applyCarouselReservedSize(existing);
        return existing;
      }

      if (carouselReserveInFlight && carouselReserveInFlightKey === key) return carouselReserveInFlight;

      carouselReserveInFlightKey = key;
      const task = (async () => {
        let maxWidth = 0;
        let maxStageHeight = 0;
        const keyAtStart = key;
        const deviceAtStart = getActiveDevice();
        const baseContainer = getCarouselContainerEl();
        const baseStage = getCarouselStageEl();
        const fallbackWidth = baseContainer ? (baseContainer.offsetWidth || 0) : 0;
        const fallbackStageHeight = baseStage ? (baseStage.getBoundingClientRect().height || 0) : 0;
        const measureBase = {
          parent: baseContainer?.parentElement || document.body,
          className: baseContainer?.className || '',
          styleText: baseContainer?.getAttribute('style') || ''
        };

        const maxHeightLimit = parseFloat(getBoxStyle('mediaBox').maxHeight || 0);

        try {
          for (const itemBase of items) {
            const spec = getCarouselMediaSpec(itemBase);
            const size = await measureCarouselSpecSize(spec, measureBase);
            if (!size) continue;
            if (Number.isFinite(size.width) && size.width > maxWidth) maxWidth = size.width;
            if (Number.isFinite(size.stageHeight) && size.stageHeight > maxStageHeight) maxStageHeight = size.stageHeight;
          }
        } catch {
          // ignore, fallback below
        }

        if (!Number.isFinite(maxWidth) || maxWidth <= 0) maxWidth = fallbackWidth;
        if (!Number.isFinite(maxStageHeight) || maxStageHeight <= 0) maxStageHeight = fallbackStageHeight;
        if (Number.isFinite(maxHeightLimit) && maxHeightLimit > 0) {
          maxStageHeight = Math.min(maxStageHeight || maxHeightLimit, maxHeightLimit);
        }

        const reserved = {
          width: Number.isFinite(maxWidth) ? Math.round(maxWidth) : 0,
          stageHeight: Number.isFinite(maxStageHeight) ? Math.round(maxStageHeight) : 0
        };

        if (!Number.isFinite(reserved.stageHeight) || reserved.stageHeight <= 0) {
          if (Number.isFinite(maxHeightLimit) && maxHeightLimit > 0) reserved.stageHeight = Math.round(maxHeightLimit);
          else reserved.stageHeight = deviceAtStart === 'mobile' ? 320 : 450;
        }

        carouselReservedSizes.set(keyAtStart, reserved);
        if (!isAdmin && getCarouselReserveKey() === keyAtStart) {
          applyCarouselReservedSize(reserved);
        }
        return reserved;
      })();

      carouselReserveInFlight = task;
      task.finally(() => {
        if (carouselReserveInFlight === task) {
          carouselReserveInFlight = null;
        }
      });

      return task;
    }

    function renderCarouselSlot() {
      const slot = getCarouselSlotEl();
      if (!slot) {
        render();
        return;
      }
      slot.innerHTML = renderCarousel();
      syncCarouselUI();
    }

    function stopCarouselAuto() {
      if (carouselAutoTimer) {
        clearTimeout(carouselAutoTimer);
        carouselAutoTimer = null;
      }
    }

    function scheduleCarouselAuto() {
      stopCarouselAuto();
      if (isAdmin) return;
      if (document.hidden) return;
      const items = getCarouselItems();
      if (items.length <= 1) return;

      const reserveKey = getCarouselReserveKey();
      const reserved = carouselReservedSizes.get(reserveKey);
      if (!reserved || !Number.isFinite(reserved.stageHeight) || reserved.stageHeight <= 0) {
        ensureCarouselReservedSize();
        carouselAutoTimer = setTimeout(() => {
          carouselAutoTimer = null;
          scheduleCarouselAuto();
        }, 200);
        return;
      }

      carouselAutoTimer = setTimeout(() => {
        carouselAutoTimer = null;
        if (isAdmin) return;
        if (document.hidden) {
          scheduleCarouselAuto();
          return;
        }
        nextMedia({ fromAuto: true });
      }, CAROUSEL_AUTO_INTERVAL_MS);
    }

    function syncCarouselUI() {
      preloadCarouselImages();
      ensureCarouselReservedSize();
      scheduleCarouselAuto();
    }

    document.addEventListener('visibilitychange', () => {
      if (document.hidden) stopCarouselAuto();
      else scheduleCarouselAuto();
    });

    async function goToMediaIndex(nextIndex, opts = {}) {
      const items = getCarouselItems();
      if (items.length <= 1) {
        scheduleCarouselAuto();
        return;
      }

      const targetIndex = ((nextIndex % items.length) + items.length) % items.length;
      let currentIndex = getCarouselIndex();
      if (!Number.isFinite(currentIndex) || currentIndex < 0 || currentIndex >= items.length) currentIndex = 0;
      if (targetIndex === currentIndex) {
        scheduleCarouselAuto();
        return;
      }

      if (carouselIsAnimating) {
        scheduleCarouselAuto();
        return;
      }

      carouselIsAnimating = true;
      stopCarouselAuto();

      try {
        const stage = getCarouselStageEl();
        const currentLayer = getCarouselMediaEl();
        const container = getCarouselContainerEl();
        if (!stage || !currentLayer || !container) {
          siteData.hero.currentMediaIndex = targetIndex;
          renderCarouselSlot();
          return;
        }

        const reserveKey = getCarouselReserveKey();
        const reserved = carouselReservedSizes.get(reserveKey);
        if (reserved && Number.isFinite(reserved.stageHeight) && reserved.stageHeight > 0) {
          applyCarouselReservedSize(reserved);
        } else {
          // 先鎖定目前尺寸，避免切換時推擠下方內容；再背景計算最大預留空間
          const currentWidth = container.offsetWidth || 0;
          const currentHeight = stage.getBoundingClientRect().height || 0;
          if (Number.isFinite(currentWidth) && currentWidth > 0) container.style.width = `${Math.round(currentWidth)}px`;
          if (Number.isFinite(currentHeight) && currentHeight > 0) stage.style.height = `${Math.round(currentHeight)}px`;
          ensureCarouselReservedSize();
        }

        stage.classList.remove('carousel-animating');
        stage.querySelectorAll('.carousel-layer-next').forEach(el => el.remove());

        const nextSpec = getCarouselMediaSpec(items[targetIndex]);
        const nextLayer = document.createElement('div');
        nextLayer.className = 'carousel-layer carousel-layer-next';
        nextLayer.innerHTML = nextSpec.html;
        stage.appendChild(nextLayer);

        await waitForCarouselLayerReady(nextLayer, nextSpec, 2000);

        stage.getBoundingClientRect();
        requestAnimationFrame(() => {
          stage.classList.add('carousel-animating');
        });

        if (carouselFadeTimer) clearTimeout(carouselFadeTimer);
        await new Promise(resolve => {
          carouselFadeTimer = setTimeout(() => {
            carouselFadeTimer = null;
            resolve();
          }, CAROUSEL_FADE_MS);
        });

        siteData.hero.currentMediaIndex = targetIndex;
        renderCarouselSlot();
      } catch (e) {
        siteData.hero.currentMediaIndex = targetIndex;
        renderCarouselSlot();
      } finally {
        carouselIsAnimating = false;
        scheduleCarouselAuto();
      }
    }

    function nextMedia(opts = {}) {
      const items = getCarouselItems();
      if (items.length <= 1) {
        scheduleCarouselAuto();
        return;
      }
      const currentIndex = getCarouselIndex();
      goToMediaIndex(currentIndex + 1, opts);
    }

    function prevMedia(opts = {}) {
      const items = getCarouselItems();
      if (items.length <= 1) {
        scheduleCarouselAuto();
        return;
      }
      const currentIndex = getCarouselIndex();
      goToMediaIndex(currentIndex - 1, opts);
    }

    function moveMediaItem(index, direction) {
      const items = siteData?.hero?.mediaItems;
      if (!Array.isArray(items) || items.length <= 1) return;

      const from = Math.trunc(Number(index));
      if (!Number.isFinite(from) || from < 0 || from >= items.length) return;

      const dir = Number(direction);
      const to = from + (dir < 0 ? -1 : 1);
      if (!Number.isFinite(to) || to < 0 || to >= items.length) return;

      const currentIndex = getCarouselIndex();
      const [moved] = items.splice(from, 1);
      items.splice(to, 0, moved);

      let nextCurrent = currentIndex;
      if (currentIndex === from) {
        nextCurrent = to;
      } else if (from < to && currentIndex > from && currentIndex <= to) {
        nextCurrent = currentIndex - 1;
      } else if (to < from && currentIndex >= to && currentIndex < from) {
        nextCurrent = currentIndex + 1;
      }
      if (Number.isFinite(nextCurrent)) siteData.hero.currentMediaIndex = nextCurrent;

      saveData();
    }

    function addMediaItem() {
      const newId = 'hero-media-' + Date.now();
      siteData.hero.mediaItems.push({
        id: newId,
        type: 'media',
        content: 'https://picsum.photos/seed/' + Date.now() + '/800/800',
        mediaType: 'image'
      });
      saveData();
    }

    function removeMediaItem(index) {
      if (siteData.hero.mediaItems.length > 1) {
        siteData.hero.mediaItems.splice(index, 1);
        if (siteData.hero.currentMediaIndex >= siteData.hero.mediaItems.length) {
          siteData.hero.currentMediaIndex = siteData.hero.mediaItems.length - 1;
        }
        saveData();
      } else {
        alert('至少需要保留一張圖片！');
      }
    }

    function updateMediaItem(index, url) {
      const item = siteData.hero.mediaItems[index];
      if (!item) return;
      updateElement(item.id, { content: url });
    }

    // ============ 選取範圍保存/恢復 ============
    function saveSelection() {
      const sel = window.getSelection();
      if (sel.rangeCount > 0) {
        savedSelection = sel.getRangeAt(0).cloneRange();
      }
    }

    function restoreSelection() {
      if (savedSelection) {
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(savedSelection);
      }
    }

    // ============ 導出/導入功能 ============
    function exportData() {
      const dataStr = JSON.stringify(siteData, null, 2);
      const blob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'site-data.json';
      a.click();
      URL.revokeObjectURL(url);
      alert('設定已導出！\n\n更新網站步驟：\n1. 用文字編輯器打開 index.html\n2. 找到 INITIAL_DATA = {...}\n3. 用導出的 JSON 內容替換\n4. 提交並推送到 GitHub');
    }

    function copyDataToClipboard() {
      const dataStr = JSON.stringify(siteData, null, 2);
      navigator.clipboard.writeText(dataStr).then(() => {
        alert('設定已複製到剪貼板！\n\n更新網站步驟：\n1. 用文字編輯器打開 index.html\n2. 找到 _DATA = {...};\n3. 用複製的內容替換 {...} 部分\n4. 儲存檔案\n5. git add . && git commit -m "更新內容" && git push');
      });
    }

    function importData() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (ev) => {
          try {
            const data = JSON.parse(ev.target.result);
            siteData = data;
            saveData();
            alert('設定已導入！');
          } catch (err) {
            alert('檔案格式錯誤！');
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    // ============ YouTube 解析 ============
    function getYouTubeId(url) {
      if (!url) return null;
      const match = url.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
      return match ? match[1] : null;
    }

    // ============ 渲染函數 ============
    function renderMedia(el, extraClass = '') {
      if (!el) return '';
      const viewEl = getResponsiveElement(el);
      const adminClass = isAdmin ? 'admin-highlight' : '';
      const activeClass = activeElementId === el.id ? 'ring-4 ring-pink-500' : '';
      const offsetX = parseFloat(viewEl.style?.offsetX) || 0;
      const offsetY = parseFloat(viewEl.style?.offsetY) || 0;
      const rotateDeg = parseFloat(viewEl.style?.rotation) || 0;
      const transforms = [];
      if (offsetX || offsetY) transforms.push(`translate(${offsetX}px, ${offsetY}px)`);
      if (rotateDeg) transforms.push(`rotate(${rotateDeg}deg)`);
      const transformStyle = transforms.length ? `transform: ${transforms.join(' ')};` : '';
      const onClick = isAdmin ? `onclick="event.stopPropagation();selectElement('${el.id}')"` : '';

      const youtubeId = getYouTubeId(viewEl.content);
      if (youtubeId) {
        return `<div class="${adminClass} ${activeClass} ${extraClass}" style="${transformStyle}" ${onClick}>
          <iframe width="100%" height="450" src="https://www.youtube.com/embed/${youtubeId}" frameborder="0" allowfullscreen class="rounded"></iframe>
        </div>`;
      }
      if (viewEl.content && (viewEl.content.includes('.mp4') || viewEl.content.includes('.webm'))) {
        return `<video src="${viewEl.content}" controls class="max-w-full h-auto rounded ${adminClass} ${activeClass} ${extraClass}" style="${transformStyle}" ${onClick}></video>`;
      }
      return `<img src="${viewEl.content}" alt="圖片" class="max-w-full h-auto rounded ${adminClass} ${activeClass} ${extraClass}" style="${transformStyle}" ${onClick}>`;
    }

    function renderElement(el, extraClass = '') {
      if (!el) return '';
      const viewEl = getResponsiveElement(el);
      const adminClass = isAdmin ? 'admin-highlight' : '';
      const activeClass = activeElementId === el.id ? 'ring-4 ring-pink-500' : '';
      const offsetX = parseFloat(viewEl.style?.offsetX) || 0;
      const offsetY = parseFloat(viewEl.style?.offsetY) || 0;
      const rotateDeg = parseFloat(viewEl.style?.rotation) || 0;
      const transforms = [];
      if (offsetX || offsetY) transforms.push(`translate(${offsetX}px, ${offsetY}px)`);
      if (rotateDeg) transforms.push(`rotate(${rotateDeg}deg)`);
      const transformStyle = transforms.length ? `transform: ${transforms.join(' ')};` : '';
      const color = viewEl.style?.color ? `color: ${viewEl.style.color};` : '';
      const onClick = isAdmin ? `onclick="event.stopPropagation();selectElement('${el.id}')"` : '';

      if (viewEl.type === 'media') return renderMedia(viewEl, extraClass);
      if (viewEl.type === 'image') {
        return `<img src="${viewEl.content}" alt="圖片" class="max-w-full h-auto rounded ${adminClass} ${activeClass} ${extraClass}" style="${transformStyle}" ${onClick}>`;
      }
      // 支援圖片模式的標題
      if (viewEl.displayMode === 'image' && viewEl.imageUrl) {
        let imgStyles = [];
        if (viewEl.imageWidth) imgStyles.push('width:' + viewEl.imageWidth + 'px');
        if (viewEl.imageHeight) imgStyles.push('height:' + viewEl.imageHeight + 'px');
        if (!viewEl.imageWidth && !viewEl.imageHeight) imgStyles.push('max-height:12rem');
        if (viewEl.keepRatio) imgStyles.push('object-fit:contain');
        const styleStr = imgStyles.join(';');

        const isHeroTitleImage = el.id === 'hero-title';
        let effectClass = '';
        let effectVars = '';
        if (isHeroTitleImage) {
          const effectType = String(viewEl.style?.imageEffect || 'none');
          if (effectType && effectType !== 'none') {
            const speedNum = parseFloat(viewEl.style?.imageEffectSpeed);
            const speed = Number.isFinite(speedNum) ? Math.max(0.5, Math.min(20, speedNum)) : 8;
            const color = String(viewEl.style?.imageEffectColor || '#00ffff');
            const strengthNum = parseFloat(viewEl.style?.imageEffectStrength);
            const strength = Number.isFinite(strengthNum) ? Math.max(0, Math.min(100, strengthNum)) : 60;
            const glow = Math.round((strength / 100) * 28);
            const glow1 = Math.max(0, Math.round(glow * 0.4));
            const glow2 = Math.max(0, Math.round(glow * 0.9));
            const glow3 = Math.max(0, Math.round(glow * 1.8));
            const cssColor = glow > 0 ? color : 'transparent';
            effectClass = `hero-title-effect hero-title-effect-${effectType}`;
            effectVars = `--hero-fx-color:${cssColor};--hero-fx-speed:${speed}s;--hero-fx-glow1:${glow1}px;--hero-fx-glow2:${glow2}px;--hero-fx-glow3:${glow3}px;`;
          }
        }

        const wrapperClass = [adminClass, activeClass, extraClass, effectClass].filter(Boolean).join(' ');
        const wrapperStyle = (transformStyle || '') + (effectVars ? ' ' + effectVars : '');
        return '<div class="' + wrapperClass + '" style="' + wrapperStyle + '" ' + onClick + '><img src="' + viewEl.imageUrl + '" alt="標題圖片" class="mx-auto" style="' + styleStr + '"></div>';
      }
      const fontSizeStyle = viewEl.style?.fontSizePx ? `font-size:${viewEl.style.fontSizePx}px;` : '';
      const fontSizeClass = !viewEl.style?.fontSizePx && viewEl.style?.fontSize ? viewEl.style.fontSize : '';
      return `<div class="${fontSizeClass} ${adminClass} ${activeClass} ${extraClass}" style="${transformStyle} ${color} ${fontSizeStyle}" ${onClick}>${viewEl.content}</div>`;
    }

    function renderSidebar() {
      if (!isAdmin) return '';

      if (activeElementId === 'background-settings') {
        const bg = getResponsiveObject(siteData.background || {});
        const settings = getResponsiveObject(siteData.settings || {});
        const currentFont = settings?.englishFont || 'GarmentDistrict';
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">網站設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">網頁標題</h4>
                <input type="text" id="page-title-input" value="${settings?.pageTitle || INITIAL_DATA.settings.pageTitle}" class="w-full p-2 border-2 border-black rounded text-sm mb-2" placeholder="輸入網頁標題">
                <button class="w-full py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateSettings({pageTitle: document.getElementById('page-title-input').value})">套用標題</button>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">轉貼預覽文字（分享標題）</h4>
                <input type="text" id="share-title-input" value="${siteData.settings?.shareTitle || settings?.pageTitle || INITIAL_DATA.settings.pageTitle}" class="w-full p-2 border-2 border-black rounded text-sm mb-2" placeholder="例如：ReViewTaiwan 重新觀看行動">
                <button class="w-full py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateSettingsGlobal({shareTitle: document.getElementById('share-title-input').value})">套用分享標題</button>
                <p class="text-xs text-gray-400 mt-1">此項為全站共用（不分手機/桌機），用於 OG/Twitter/Description。</p>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">轉貼預覽文字（分享簡介）</h4>
                <input type="text" id="share-desc-input" value="${siteData.settings?.shareDescription || siteData.settings?.shareTitle || settings?.pageTitle || INITIAL_DATA.settings.pageTitle}" class="w-full p-2 border-2 border-black rounded text-sm mb-2" placeholder="例如：ReViewTaiwan 重新觀看行動">
                <button class="w-full py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateSettingsGlobal({shareDescription: document.getElementById('share-desc-input').value})">套用分享簡介</button>
                <p class="text-xs text-gray-400 mt-1">此項為全站共用（不分手機/桌機），會寫入 meta description / og:description / twitter:description。</p>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">網頁小圖示 (Favicon)</h4>
                <input type="text" id="favicon-input" value="${settings?.favicon || ''}" class="w-full p-2 border-2 border-black rounded text-sm mb-2" placeholder="輸入圖片網址 (建議 32x32 或 64x64)">
                <button class="w-full py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm mb-2" onclick="updateSettings({favicon: document.getElementById('favicon-input').value})">套用圖示</button>
                ${settings?.favicon ? `
                  <div class="flex items-center gap-2 mt-2">
                    <img src="${settings.favicon}" class="w-8 h-8 border border-gray-300 rounded" alt="預覽">
                    <button class="text-red-500 text-xs hover:underline" onclick="updateSettings({favicon: ''})">清除圖示</button>
                  </div>
                ` : ''}
                <p class="text-xs text-gray-400 mt-1">建議使用 .ico、.png 或 .svg 格式</p>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">英文字體</h4>
                <select class="w-full p-2 border-2 border-black rounded" onchange="updateSettings({englishFont: this.value})">
                  ${AVAILABLE_FONTS.map(f => `<option value="${f.id}" ${currentFont === f.id ? 'selected' : ''} style="font-family: '${f.id}'">${f.name}</option>`).join('')}
                </select>
              </div>
              <div>
                <h4 class="font-bold mb-2 text-sm">背景顏色</h4>
                <input type="color" value="${bg.color || '#fcfcfc'}" class="w-full h-10 cursor-pointer" onchange="updateBackground({color: this.value})">
              </div>
              <div>
                <h4 class="font-bold mb-2 text-sm">背景圖片網址</h4>
                <input type="text" value="${bg.image || ''}" class="w-full p-2 border-2 border-black rounded text-sm" placeholder="輸入圖片網址或留空" onchange="updateBackground({image: this.value})">
              </div>
              <button onclick="updateBackground({image: ''})" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm">清除背景圖片</button>

              <div class="border-t pt-4 mt-4">
                <h4 class="font-bold mb-3 text-sm">背景圖片大小與位置</h4>
                <div class="mb-3">
                  <label class="text-xs font-bold">大小模式</label>
                  <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateBackground({size: this.value})">
                    <option value="auto" ${(bg.size || 'auto') === 'auto' ? 'selected' : ''}>自動 (原始大小)</option>
                    <option value="cover" ${bg.size === 'cover' ? 'selected' : ''}>填滿 (cover)</option>
                    <option value="contain" ${bg.size === 'contain' ? 'selected' : ''}>完整顯示 (contain)</option>
                    <option value="100% 100%" ${bg.size === '100% 100%' ? 'selected' : ''}>拉伸填滿</option>
                    <option value="50%" ${bg.size === '50%' ? 'selected' : ''}>50%</option>
                    <option value="150%" ${bg.size === '150%' ? 'selected' : ''}>150%</option>
                    <option value="200%" ${bg.size === '200%' ? 'selected' : ''}>200%</option>
                    <option value="300%" ${bg.size === '300%' ? 'selected' : ''}>300%</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="text-xs font-bold">水平位置: ${bg.posX ?? 50}%</label>
                  <input type="range" min="0" max="100" value="${bg.posX ?? 50}" class="w-full" onchange="updateBackground({posX: parseInt(this.value)})">
                  <div class="flex justify-between text-xs text-gray-400"><span>左</span><span>中</span><span>右</span></div>
                </div>
                <div class="mb-3">
                  <label class="text-xs font-bold">垂直位置: ${bg.posY ?? 50}%</label>
                  <input type="range" min="0" max="100" value="${bg.posY ?? 50}" class="w-full" onchange="updateBackground({posY: parseInt(this.value)})">
                  <div class="flex justify-between text-xs text-gray-400"><span>上</span><span>中</span><span>下</span></div>
                </div>
                <div class="mb-3">
                  <label class="text-xs font-bold">重複方式</label>
                  <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateBackground({repeat: this.value})">
                    <option value="repeat" ${(bg.repeat || 'repeat') === 'repeat' ? 'selected' : ''}>重複平鋪</option>
                    <option value="no-repeat" ${bg.repeat === 'no-repeat' ? 'selected' : ''}>不重複</option>
                    <option value="repeat-x" ${bg.repeat === 'repeat-x' ? 'selected' : ''}>水平重複</option>
                    <option value="repeat-y" ${bg.repeat === 'repeat-y' ? 'selected' : ''}>垂直重複</option>
                  </select>
                </div>
                <div class="flex items-center gap-2 mb-3">
                  <input type="checkbox" id="bg-fixed" ${bg.fixed ? 'checked' : ''} onchange="updateBackground({fixed: this.checked})">
                  <label for="bg-fixed" class="text-xs font-bold">固定背景 (滾動時不動)</label>
                </div>
                <div>
                  <label class="text-xs font-bold">背景透明度: ${bg.opacity ?? 100}%</label>
                  <div class="flex gap-2 items-center">
                    <input type="range" min="0" max="100" value="${bg.opacity ?? 100}" class="flex-1" id="bg-opacity-slider" oninput="document.getElementById('bg-opacity-val').textContent=this.value+'%'">
                    <span id="bg-opacity-val" class="text-xs w-12">${bg.opacity ?? 100}%</span>
                    <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600" onclick="updateBackground({opacity: parseInt(document.getElementById('bg-opacity-slider').value)})">套用</button>
                  </div>
                </div>
              </div>
              <div class="border-t pt-4 mt-4">
                <h4 class="font-bold mb-3 text-sm">動畫滑鼠游標</h4>
                <div class="space-y-3">
                  <div class="flex items-center gap-2">
                    <input type="checkbox" id="cursor-enabled" ${(settings.cursorEnabled !== false) ? 'checked' : ''}>
                    <label for="cursor-enabled" class="text-xs font-bold">啟用自訂游標</label>
                    <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600 ml-auto" onclick="updateCursorSettings({cursorEnabled: document.getElementById('cursor-enabled').checked})">套用</button>
                  </div>
                  <div>
                    <label class="text-xs font-bold">游標大小: ${settings.cursorSize || 48}px</label>
                    <div class="flex gap-2 items-center">
                      <input type="number" id="cursor-size-input" value="${settings.cursorSize || 48}" min="16" max="128" class="w-20 p-1 border border-gray-300 rounded text-sm">
                      <span class="text-xs text-gray-400">px</span>
                      <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600" onclick="updateCursorSettings({cursorSize: parseInt(document.getElementById('cursor-size-input').value)||48})">套用</button>
                    </div>
                  </div>
                  <div>
                    <label class="text-xs font-bold">動畫速度: ${settings.cursorSpeed || 80}ms</label>
                    <div class="flex gap-2 items-center">
                      <input type="range" id="cursor-speed-slider" min="30" max="200" value="${settings.cursorSpeed || 80}" class="flex-1" oninput="document.getElementById('cursor-speed-val').textContent=this.value+'ms'">
                      <span id="cursor-speed-val" class="text-xs w-12">${settings.cursorSpeed || 80}ms</span>
                      <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600" onclick="updateCursorSettings({cursorSpeed: parseInt(document.getElementById('cursor-speed-slider').value)||80})">套用</button>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">數值越小動畫越快</p>
                  </div>
                </div>
              </div>
              <div class="border-t pt-4 mt-4">
                <h4 class="font-bold mb-2 text-sm">儲存設定到網站</h4>
                <p class="text-xs text-gray-500 mb-2">目前的修改只存在你的瀏覽器。要讓所有人看到，請導出設定並更新 GitHub。</p>
                <button onclick="copyDataToClipboard()" class="w-full py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm mb-2">複製設定到剪貼板</button>
                <button onclick="exportData()" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm mb-2">下載設定檔 (JSON)</button>
                <button onclick="importData()" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm">導入設定檔</button>
              </div>
            </div>
            <div class="p-4 border-t-2 border-black">
              <button onclick="if(confirm('確定要重置所有內容嗎？')){localStorage.removeItem('drawme_data_v14');location.reload();}" class="w-full py-2 bg-red-500 text-white rounded-full font-bold hover:bg-red-600 text-sm">重置所有內容</button>
            </div>
          </div>
        `;
      }

      // 輪播圖片管理
      if (activeElementId === 'carousel-settings') {
        const items = siteData.hero.mediaItems || [];
        const boxStyle = getBoxStyle('mediaBox');
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">輪播圖片管理</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">圖片框樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">框線顏色</label>
                    <input type="color" value="${boxStyle.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('mediaBox', {borderColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">框線粗細: ${boxStyle.borderWidth}px</label>
                    <input type="range" min="0" max="10" value="${boxStyle.borderWidth}" class="w-full" onchange="updateBoxStyle('mediaBox', {borderWidth: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">背景顏色</label>
                    <input type="color" value="${boxStyle.bgColor || '#ffffff'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('mediaBox', {bgColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景透明度: ${boxStyle.bgOpacity ?? 100}%</label>
                    <input type="range" min="0" max="100" value="${boxStyle.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('mediaBox', {bgOpacity: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">陰影顏色</label>
                    <input type="color" value="${boxStyle.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('mediaBox', {shadowColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">陰影透明度: ${boxStyle.shadowOpacity ?? 80}%</label>
                    <input type="range" min="0" max="100" value="${boxStyle.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('mediaBox', {shadowOpacity: parseInt(this.value)})">
                  </div>
                </div>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">圖片/影片尺寸</h4>
                <div class="space-y-3">
                  <div>
                    <label class="text-xs">最大寬度: ${boxStyle.maxWidth || 800}px</label>
                    <input type="range" min="200" max="1200" value="${boxStyle.maxWidth || 800}" class="w-full" onchange="updateBoxStyle('mediaBox', {maxWidth: parseInt(this.value)})">
                    <div class="flex justify-between text-xs text-gray-400"><span>200</span><span>700</span><span>1200</span></div>
                  </div>
                  <div>
                    <label class="text-xs">最大高度: ${boxStyle.maxHeight || 0}px (0=自動)</label>
                    <input type="range" min="0" max="800" value="${boxStyle.maxHeight || 0}" class="w-full" onchange="updateBoxStyle('mediaBox', {maxHeight: parseInt(this.value)})">
                    <div class="flex justify-between text-xs text-gray-400"><span>自動</span><span>400</span><span>800</span></div>
                  </div>
                </div>
              </div>
              <div>
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm">圖片列表 (${items.length}張)</h4>
                  <button onclick="addMediaItem()" class="px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600">+ 新增</button>
                </div>
                <div class="space-y-3 max-h-[400px] overflow-y-auto">
                  ${items.map((item, idx) => {
                    const viewItem = getResponsiveElement(item);
                    const upDisabled = idx === 0;
                    const downDisabled = idx === items.length - 1;
                    return `
                      <div class="border-2 border-gray-300 rounded p-2 ${siteData.hero.currentMediaIndex === idx ? 'border-pink-500 bg-pink-50' : ''}">
                        <div class="flex justify-between items-center mb-2">
                          <span class="text-xs font-bold">#${idx + 1}</span>
                          <div class="flex items-center gap-1">
                            <button ${upDisabled ? 'disabled' : ''} onclick="moveMediaItem(${idx}, -1)" class="px-2 py-1 border border-gray-300 rounded text-xs ${upDisabled ? 'opacity-40 cursor-not-allowed' : 'hover:bg-gray-100'}" title="上移">↑</button>
                            <button ${downDisabled ? 'disabled' : ''} onclick="moveMediaItem(${idx}, 1)" class="px-2 py-1 border border-gray-300 rounded text-xs ${downDisabled ? 'opacity-40 cursor-not-allowed' : 'hover:bg-gray-100'}" title="下移">↓</button>
                            <button onclick="removeMediaItem(${idx})" class="ml-2 text-red-500 hover:text-red-700 text-xs">刪除</button>
                          </div>
                        </div>
                        <input type="text" value="${viewItem.content}" class="w-full p-1 border border-gray-300 rounded text-xs mb-2" placeholder="圖片或影片網址" onchange="updateMediaItem(${idx}, this.value)">
                        ${getYouTubeId(viewItem.content) ?
                          `<div class="text-xs text-gray-500">YouTube 影片</div>` :
                          `<img src="${viewItem.content}" class="w-full h-20 object-cover rounded">`
                        }
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // 虛線框設定
      if (activeElementId === 'box-dashed') {
        const db = getBoxStyle('dashedBorder');
        const fs = getBoxStyle('footerBox');
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">底部區域設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">虛線框樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">虛線顏色</label>
                    <input type="color" value="${db.color}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('dashedBorder', {color: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">虛線粗細: ${db.width}px</label>
                    <input type="range" min="1" max="20" value="${db.width}" class="w-full" onchange="updateBoxStyle('dashedBorder', {width: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">虛線長度: ${db.dashLength}px</label>
                    <input type="range" min="2" max="50" value="${db.dashLength}" class="w-full" onchange="updateBoxStyle('dashedBorder', {dashLength: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">間隔長度: ${db.gapLength}px</label>
                    <input type="range" min="2" max="50" value="${db.gapLength}" class="w-full" onchange="updateBoxStyle('dashedBorder', {gapLength: parseInt(this.value)})">
                  </div>
                </div>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">聯絡框樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">框線顏色</label>
                    <input type="color" value="${fs.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('footerBox', {borderColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">框線粗細: ${fs.borderWidth}px</label>
                    <input type="range" min="0" max="10" value="${fs.borderWidth}" class="w-full" onchange="updateBoxStyle('footerBox', {borderWidth: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">背景顏色</label>
                    <input type="color" value="${fs.bgColor || '#FF00A0'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('footerBox', {bgColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景透明度: ${fs.bgOpacity ?? 100}%</label>
                    <input type="range" min="0" max="100" value="${fs.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('footerBox', {bgOpacity: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">陰影顏色</label>
                    <input type="color" value="${fs.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('footerBox', {shadowColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">陰影透明度: ${fs.shadowOpacity ?? 80}%</label>
                    <input type="range" min="0" max="100" value="${fs.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('footerBox', {shadowOpacity: parseInt(this.value)})">
                  </div>
                </div>
              </div>
              <div>
                <h4 class="font-bold mb-2 text-sm">Instagram 連結</h4>
                <input type="text" value="${siteData.instagramLink || ''}" class="w-full p-2 border border-gray-300 rounded text-xs" placeholder="https://www.instagram.com/yourname/" onchange="updateInstagramLink(this.value)">
                <p class="text-xs text-gray-400 mt-1">點擊聯絡框會開啟此連結</p>
              </div>
            </div>
          </div>
        `;
      }

      // 宣言區塊框設定
      if (activeElementId === 'box-manifesto') {
        const ms = getBoxStyle('manifestoBox');
        const contentAlign = String(ms.contentAlign || 'left');
        const collapseEnabled = ms.collapseEnabled !== false;
        const collapsedHeightRaw = parseFloat(ms.collapsedHeight || 0);
        const defaultCollapsedHeight = getActiveDevice() === 'mobile' ? 280 : 420;
        const collapsedHeight =
          (Number.isFinite(collapsedHeightRaw) && collapsedHeightRaw > 0)
            ? Math.round(collapsedHeightRaw)
            : defaultCollapsedHeight;
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">宣言區塊設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <label class="text-xs font-bold">文字對齊</label>
                <select class="w-full p-2 border border-gray-300 rounded text-xs mt-1" onchange="updateBoxStyle('manifestoBox', {contentAlign: this.value})">
                  <option value="left" ${contentAlign === 'left' ? 'selected' : ''}>靠左</option>
                  <option value="center" ${contentAlign === 'center' ? 'selected' : ''}>置中</option>
                  <option value="right" ${contentAlign === 'right' ? 'selected' : ''}>置右</option>
                </select>
                <p class="text-[11px] text-gray-500 mt-1">手機/桌機可獨立設定</p>
                <div class="mt-3 flex items-center gap-2">
                  <input type="checkbox" id="manifesto-collapse-enabled" ${collapseEnabled ? 'checked' : ''} onchange="updateBoxStyle('manifestoBox', {collapseEnabled: this.checked})">
                  <label for="manifesto-collapse-enabled" class="text-xs font-bold">長文收合（...more）</label>
                </div>
                <div class="mt-2">
                  <label class="text-xs">收合高度: ${collapsedHeight}px</label>
                  <input type="range" min="180" max="1200" value="${collapsedHeight}" class="w-full" onchange="updateBoxStyle('manifestoBox', {collapsedHeight: parseInt(this.value)})">
                </div>
              </div>
              <div>
                <label class="text-xs">框線顏色</label>
                <input type="color" value="${ms.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('manifestoBox', {borderColor: this.value})">
              </div>
              <div>
                <label class="text-xs">框線粗細: ${ms.borderWidth}px</label>
                <input type="range" min="0" max="10" value="${ms.borderWidth}" class="w-full" onchange="updateBoxStyle('manifestoBox', {borderWidth: parseInt(this.value)})">
              </div>
              <div>
                <label class="text-xs">背景顏色</label>
                <input type="color" value="${ms.bgColor || '#ffffff'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('manifestoBox', {bgColor: this.value})">
              </div>
              <div>
                <label class="text-xs">背景透明度: ${ms.bgOpacity ?? 50}%</label>
                <input type="range" min="0" max="100" value="${ms.bgOpacity ?? 50}" class="w-full" onchange="updateBoxStyle('manifestoBox', {bgOpacity: parseInt(this.value)})">
              </div>
              <div>
                <label class="text-xs">陰影顏色</label>
                <input type="color" value="${ms.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('manifestoBox', {shadowColor: this.value})">
              </div>
              <div>
                <label class="text-xs">陰影透明度: ${ms.shadowOpacity ?? 80}%</label>
                <input type="range" min="0" max="100" value="${ms.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('manifestoBox', {shadowOpacity: parseInt(this.value)})">
              </div>
            </div>
          </div>
        `;
      }

      // 行動區塊框設定
      if (activeElementId === 'box-action') {
        const as = getBoxStyle('actionBox');
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">行動區塊設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div>
                <label class="text-xs">框線顏色</label>
                <input type="color" value="${as.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('actionBox', {borderColor: this.value})">
              </div>
              <div>
                <label class="text-xs">框線粗細: ${as.borderWidth}px</label>
                <input type="range" min="0" max="10" value="${as.borderWidth}" class="w-full" onchange="updateBoxStyle('actionBox', {borderWidth: parseInt(this.value)})">
              </div>
              <div>
                <label class="text-xs">背景顏色</label>
                <input type="color" value="${as.bgColor || '#ffffff'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('actionBox', {bgColor: this.value})">
              </div>
              <div>
                <label class="text-xs">背景透明度: ${as.bgOpacity ?? 100}%</label>
                <input type="range" min="0" max="100" value="${as.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('actionBox', {bgOpacity: parseInt(this.value)})">
              </div>
              <div>
                <label class="text-xs">陰影顏色</label>
                <input type="color" value="${as.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('actionBox', {shadowColor: this.value})">
              </div>
              <div>
                <label class="text-xs">陰影透明度: ${as.shadowOpacity ?? 80}%</label>
                <input type="range" min="0" max="100" value="${as.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('actionBox', {shadowOpacity: parseInt(this.value)})">
              </div>
            </div>
          </div>
        `;
      }

      // 索取徽章地點設定
      if (activeElementId === 'locations-settings') {
        const ls = getBoxStyle('locationsBox');
        const locations = siteData.locations?.items || [];
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">索取徽章地點</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">區塊樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">框線顏色</label>
                    <input type="color" value="${ls.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('locationsBox', {borderColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景顏色</label>
                    <input type="color" value="${ls.bgColor || '#FFF8E7'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('locationsBox', {bgColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景透明度: ${ls.bgOpacity ?? 100}%</label>
                    <input type="range" min="0" max="100" value="${ls.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('locationsBox', {bgOpacity: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">陰影顏色</label>
                    <input type="color" value="${ls.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('locationsBox', {shadowColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">陰影透明度: ${ls.shadowOpacity ?? 80}%</label>
                    <input type="range" min="0" max="100" value="${ls.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('locationsBox', {shadowOpacity: parseInt(this.value)})">
                  </div>
                </div>
              </div>
              <div>
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm">地點列表 (${locations.length}個)</h4>
                  <button onclick="addLocation()" class="px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600">+ 新增</button>
                </div>
                <div class="space-y-3 max-h-[350px] overflow-y-auto">
                  ${locations.map((loc, idx) => `
                    <div class="border-2 border-gray-300 rounded p-2">
                      <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold">#${idx + 1}</span>
                        <button onclick="removeLocation(${idx})" class="text-red-500 hover:text-red-700 text-xs">刪除</button>
                      </div>
                      <input type="text" value="${loc.name}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="地點名稱" onchange="updateLocation(${idx}, 'name', this.value)">
                      <input type="text" value="${loc.address}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="地址" onchange="updateLocation(${idx}, 'address', this.value)">
                      <input type="text" value="${loc.note}" class="w-full p-1 border border-gray-300 rounded text-xs" placeholder="備註" onchange="updateLocation(${idx}, 'note', this.value)">
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // 贊助廠商/藝術家設定
      if (activeElementId === 'supporters-settings') {
        const ss = getBoxStyle('supportersBox');
        const sponsors = siteData.supporters?.sponsors || [];
        const artists = siteData.supporters?.artists || [];
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">贊助商/藝術家</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">區塊樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">框線顏色</label>
                    <input type="color" value="${ss.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('supportersBox', {borderColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景顏色</label>
                    <input type="color" value="${ss.bgColor || '#E7F0FF'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('supportersBox', {bgColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景透明度: ${ss.bgOpacity ?? 100}%</label>
                    <input type="range" min="0" max="100" value="${ss.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('supportersBox', {bgOpacity: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">陰影顏色</label>
                    <input type="color" value="${ss.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('supportersBox', {shadowColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">陰影透明度: ${ss.shadowOpacity ?? 80}%</label>
                    <input type="range" min="0" max="100" value="${ss.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('supportersBox', {shadowOpacity: parseInt(this.value)})">
                  </div>
                </div>
              </div>

              <div class="border-b pb-4">
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm">贊助廠商 (${sponsors.length}個)</h4>
                  <button onclick="addSponsor()" class="px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600">+ 新增</button>
                </div>
                <div class="space-y-2 max-h-[150px] overflow-y-auto">
                  ${sponsors.map((sp, idx) => `
                    <div class="border border-gray-300 rounded p-2">
                      <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold">#${idx + 1}</span>
                        <button onclick="removeSponsor(${idx})" class="text-red-500 hover:text-red-700 text-xs">刪除</button>
                      </div>
                      <input type="text" value="${sp.name}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="名稱" onchange="updateSponsor(${idx}, 'name', this.value)">
                      <input type="text" value="${sp.logo}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="Logo 圖片網址" onchange="updateSponsor(${idx}, 'logo', this.value)">
                      <input type="text" value="${sp.url || ''}" class="w-full p-1 border border-gray-300 rounded text-xs" placeholder="連結網址" onchange="updateSponsor(${idx}, 'url', this.value)">
                    </div>
                  `).join('')}
                </div>
              </div>

              <div>
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm">參與藝術家 (${artists.length}個)</h4>
                  <button onclick="addArtist()" class="px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600">+ 新增</button>
                </div>
                <div class="space-y-2 max-h-[150px] overflow-y-auto">
                  ${artists.map((art, idx) => `
                    <div class="border border-gray-300 rounded p-2">
                      <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold">#${idx + 1}</span>
                        <button onclick="removeArtist(${idx})" class="text-red-500 hover:text-red-700 text-xs">刪除</button>
                      </div>
                      <input type="text" value="${art.name}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="名稱" onchange="updateArtist(${idx}, 'name', this.value)">
                      <input type="text" value="${art.avatar}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="頭像圖片網址" onchange="updateArtist(${idx}, 'avatar', this.value)">
                      <input type="text" value="${art.url || ''}" class="w-full p-1 border border-gray-300 rounded text-xs" placeholder="連結網址 (IG/網站)" onchange="updateArtist(${idx}, 'url', this.value)">
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // 圖檔下載設定
      if (activeElementId === 'downloads-settings') {
        const ds = getBoxStyle('downloadsBox');
        const downloads = siteData.downloads?.items || [];
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">圖檔下載</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-2 text-sm">區塊樣式</h4>
                <div class="space-y-2">
                  <div>
                    <label class="text-xs">框線顏色</label>
                    <input type="color" value="${ds.borderColor}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('downloadsBox', {borderColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">框線粗細: ${ds.borderWidth}px</label>
                    <input type="range" min="0" max="10" value="${ds.borderWidth}" class="w-full" onchange="updateBoxStyle('downloadsBox', {borderWidth: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">背景顏色</label>
                    <input type="color" value="${ds.bgColor || '#F0FFF0'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('downloadsBox', {bgColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">背景透明度: ${ds.bgOpacity ?? 100}%</label>
                    <input type="range" min="0" max="100" value="${ds.bgOpacity ?? 100}" class="w-full" onchange="updateBoxStyle('downloadsBox', {bgOpacity: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs">陰影顏色</label>
                    <input type="color" value="${ds.shadowColor || '#000000'}" class="w-full h-8 cursor-pointer" onchange="updateBoxStyle('downloadsBox', {shadowColor: this.value})">
                  </div>
                  <div>
                    <label class="text-xs">陰影透明度: ${ds.shadowOpacity ?? 80}%</label>
                    <input type="range" min="0" max="100" value="${ds.shadowOpacity ?? 80}" class="w-full" onchange="updateBoxStyle('downloadsBox', {shadowOpacity: parseInt(this.value)})">
                  </div>
                </div>
              </div>

              <div>
                <div class="flex justify-between items-center mb-2">
                  <h4 class="font-bold text-sm">下載項目 (${downloads.length}個)</h4>
                  <button onclick="addDownload()" class="px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600">+ 新增</button>
                </div>
                <div class="space-y-3 max-h-[420px] overflow-y-auto">
                  ${downloads.map((dl, idx) => {
                    const viewDl = getResponsiveElement(dl);
                    return `
                      <div class="border-2 border-gray-300 rounded p-2">
                        <div class="flex justify-between items-center mb-2">
                          <span class="text-xs font-bold">#${idx + 1}</span>
                          <button onclick="removeDownload(${idx})" class="text-red-500 hover:text-red-700 text-xs">刪除</button>
                        </div>
                        <input type="text" value="${viewDl.name || ''}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="下載名稱" onchange="updateDownload(${idx}, 'name', this.value)">
                        <input type="text" value="${viewDl.url || ''}" class="w-full p-1 border border-gray-300 rounded text-xs mb-1" placeholder="下載連結（可留空）" onchange="updateDownload(${idx}, 'url', this.value)">
                        <input type="text" value="${viewDl.description || ''}" class="w-full p-1 border border-gray-300 rounded text-xs" placeholder="描述" onchange="updateDownload(${idx}, 'description', this.value)">
                        ${(getActiveDevice() === 'mobile' && dl.mobile) ? `
                          <button onclick="clearElementMobileOverrides('${dl.id}')" class="mt-2 w-full py-1 border border-gray-400 rounded hover:bg-gray-100 text-xs">清除手機版覆寫</button>
                        ` : ''}
                      </div>
                    `;
                  }).join('')}
                </div>
                <div class="mt-3 p-3 bg-blue-50 border border-blue-300 rounded text-xs">
                  <strong>提示：</strong>你現在填寫的下載連結會依「桌機/手機」模式分開儲存，兩邊互不影響。
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // 左側動畫設定 (PNG 序列)
      if (activeElementId === 'left-animation') {
        const leftAnimBase = siteData.decoration?.leftAnimation || {};
        const leftAnim = getResponsiveObject(leftAnimBase);
        const useSequence = leftAnim.useSequence !== false;
        const scrollWithPage = leftAnim.scrollWithPage === true;
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">左側動畫設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div class="border-b pb-4">
                <h4 class="font-bold mb-3 text-sm">PNG 序列動畫</h4>
                <div class="flex items-center gap-2 mb-3">
                  <input type="checkbox" id="left-anim-enabled" ${useSequence ? 'checked' : ''}>
                  <label for="left-anim-enabled" class="text-sm font-bold">啟用 PNG 序列動畫</label>
                  <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600 ml-auto" onclick="updateLeftAnimationSettings({useSequence: document.getElementById('left-anim-enabled').checked})">套用</button>
                </div>
                <div>
                  <label class="block text-sm font-bold mb-2">動畫速度: ${leftAnim.sequenceSpeed || 80}ms</label>
                  <div class="flex gap-2 items-center">
                    <input type="range" id="left-anim-speed" min="30" max="200" value="${leftAnim.sequenceSpeed || 80}" class="flex-1" oninput="document.getElementById('left-anim-speed-val').textContent=this.value+'ms'">
                    <span id="left-anim-speed-val" class="text-xs w-12">${leftAnim.sequenceSpeed || 80}ms</span>
                    <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600" onclick="updateLeftAnimationSettings({sequenceSpeed: parseInt(document.getElementById('left-anim-speed').value)||80})">套用</button>
                  </div>
                  <p class="text-xs text-gray-400 mt-1">數值越小動畫越快</p>
                </div>
              </div>
              <div class="border-b pb-4">
                <h4 class="font-bold mb-3 text-sm">滾動行為</h4>
                <div class="flex items-center gap-2">
                  <input type="checkbox" id="left-anim-scroll" ${scrollWithPage ? 'checked' : ''}>
                  <label for="left-anim-scroll" class="text-sm">隨頁面滾動</label>
                  <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600 ml-auto" onclick="updateLeftAnimation({scrollWithPage: document.getElementById('left-anim-scroll').checked})">套用</button>
                </div>
                <p class="text-xs text-gray-400 mt-1">勾選後動畫會跟著頁面一起滾動，否則固定在螢幕上</p>
              </div>
              <div>
                <label class="block text-sm font-bold mb-2">寬度: ${leftAnim.width || 200}px</label>
                <input type="range" min="50" max="600" value="${leftAnim.width || 200}" class="w-full" onchange="updateLeftAnimation({width: parseInt(this.value)})">
              </div>
              <div>
                <label class="block text-sm font-bold mb-2">高度: ${leftAnim.height || 300}px</label>
                <input type="range" min="50" max="800" value="${leftAnim.height || 300}" class="w-full" onchange="updateLeftAnimation({height: parseInt(this.value)})">
              </div>
              <div class="border-t pt-4 mt-4">
                <h4 class="font-bold mb-3 text-sm">位置調整</h4>
                <div>
                  <label class="block text-sm font-bold mb-2">水平位置 (X): ${leftAnim.posX ?? 30}px</label>
                  <input type="range" min="-500" max="1500" value="${leftAnim.posX ?? 30}" class="w-full" onchange="updateLeftAnimation({posX: parseInt(this.value)})">
                  <div class="flex justify-between text-xs text-gray-400 mt-1">
                    <span>-500</span>
                    <span>0</span>
                    <span>750</span>
                    <span>1500</span>
                  </div>
                </div>
                <div class="mt-4">
                  <label class="block text-sm font-bold mb-2">垂直位置 (Y): ${scrollWithPage ? leftAnim.posY ?? 50 : leftAnim.posY ?? 50}${scrollWithPage ? 'px' : '%'}</label>
                  <input type="range" min="${scrollWithPage ? '0' : '0'}" max="${scrollWithPage ? '3000' : '100'}" value="${leftAnim.posY ?? 50}" class="w-full" onchange="updateLeftAnimation({posY: parseInt(this.value)})">
                  <div class="flex justify-between text-xs text-gray-400 mt-1">
                    ${scrollWithPage ? '<span>0px</span><span>1500px</span><span>3000px</span>' : '<span>上 0%</span><span>中 50%</span><span>下 100%</span>'}
                  </div>
                </div>
              </div>
              <div class="p-3 bg-blue-50 border border-blue-300 rounded text-xs">
                <strong>說明：</strong>使用 docs/assets/sequence 資料夾中的 PNG 序列作為動畫。共 153 張圖片自動循環播放。
              </div>
              ${(getActiveDevice() === 'mobile' && siteData.decoration?.leftAnimation?.mobile) ? `
                <button onclick="clearLeftAnimationMobileOverrides()" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm">清除手機版覆寫</button>
              ` : ''}
            </div>
          </div>
        `;
      }

      // Hashtags 編輯
      if (activeElementId === 'footer-hashtags') {
        const hashtagsBase = siteData.footer?.hashtags || INITIAL_DATA.footer.hashtags;
        const hashtags = getResponsiveElement(hashtagsBase);
        return `
          <div class="sidebar open">
            <div class="p-4 border-b-2 border-black flex justify-between items-center">
              <h3 class="text-lg font-bold">Hashtags 設定</h3>
              <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
            </div>
            ${renderDeviceModeControls()}
            <div class="p-4 space-y-4 overflow-y-auto flex-1">
              <div>
                <label class="block text-sm font-bold mb-2">Hashtags 內容</label>
                <textarea id="hashtags-content" class="w-full p-2 border-2 border-black rounded text-sm h-24" placeholder="#DrawMeTaiwan #社會雕塑">${hashtags.content}</textarea>
                <button class="mt-2 px-4 py-2 bg-pink-500 text-white rounded font-bold hover:bg-pink-600 text-sm" onclick="updateElement('footer-hashtags', {content: document.getElementById('hashtags-content').value})">套用內容</button>
              </div>
              <div>
                <label class="block text-sm font-bold mb-2">文字顏色</label>
                <div class="flex gap-2 items-center">
                  <input type="color" id="hashtags-color" value="${hashtags.style?.color || '#000000'}" class="w-12 h-10 cursor-pointer border border-gray-300 rounded">
                  <button class="px-4 py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateElement('footer-hashtags', {style: {color: document.getElementById('hashtags-color').value}})">套用顏色</button>
                </div>
              </div>
              <div>
                <label class="block text-sm font-bold mb-2">透明度: ${hashtags.style?.opacity ?? 60}%</label>
                <div class="flex gap-2 items-center">
                  <input type="range" id="hashtags-opacity" min="0" max="100" value="${hashtags.style?.opacity ?? 60}" class="flex-1">
                  <button class="px-4 py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateElement('footer-hashtags', {style: {opacity: parseInt(document.getElementById('hashtags-opacity').value)}})">套用</button>
                </div>
              </div>
              <div>
                <label class="block text-sm font-bold mb-2">字體大小</label>
                <select id="hashtags-size" class="w-full p-2 border border-gray-300 rounded text-sm">
                  <option value="text-sm" ${hashtags.style?.fontSize === 'text-sm' ? 'selected' : ''}>小</option>
                  <option value="text-lg" ${hashtags.style?.fontSize === 'text-lg' ? 'selected' : ''}>中</option>
                  <option value="text-xl" ${(hashtags.style?.fontSize === 'text-xl' || !hashtags.style?.fontSize) ? 'selected' : ''}>大</option>
                  <option value="text-2xl" ${hashtags.style?.fontSize === 'text-2xl' ? 'selected' : ''}>特大</option>
                </select>
                <button class="mt-2 px-4 py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600 text-sm" onclick="updateElement('footer-hashtags', {style: {fontSize: document.getElementById('hashtags-size').value}})">套用大小</button>
              </div>
              ${(getActiveDevice() === 'mobile' && siteData.footer?.hashtags?.mobile) ? `
                <button onclick="clearElementMobileOverrides('footer-hashtags')" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm">清除手機版覆寫</button>
              ` : ''}
            </div>
          </div>
        `;
      }

      if (!activeElementId) return '';
      const el = findElement(activeElementId);
      if (!el) return '';
      const viewEl = getResponsiveElement(el);
      const isDecoCircle = el.id === 'deco-circle';
      const isHeroTitle = el.id === 'hero-title';
      const circleDefaultPosMode = getActiveDevice() === 'mobile' ? 'absolute' : 'fixed';
      const circlePosMode = viewEl.positionMode || circleDefaultPosMode;
      const circleAnchorX = viewEl.anchorX || 'right';
      const circlePosX = viewEl.posX ?? 80;
      const circlePosY = viewEl.posY ?? 80;
      const circleSize = viewEl.size ?? 160;
      const circleOpacity = getCircleImageOpacityPercent(viewEl);
      const circleFxType = String(viewEl.style?.circleFxType || 'none'); // none | rotate | glitch | rotate-glitch
      const circleFxRotateSpeedNum = parseFloat(viewEl.style?.circleFxRotateSpeed);
      const circleFxRotateSpeed = Number.isFinite(circleFxRotateSpeedNum) ? Math.max(5, Math.min(200, circleFxRotateSpeedNum)) : 60;
      const circleFxGlitchSpeedNum = parseFloat(viewEl.style?.circleFxGlitchSpeed);
      const circleFxGlitchSpeed = Number.isFinite(circleFxGlitchSpeedNum) ? Math.max(0.3, Math.min(10, circleFxGlitchSpeedNum)) : 2.5;
      const circleFxGlitchStrengthNum = parseFloat(viewEl.style?.circleFxGlitchStrength);
      const circleFxGlitchStrength = Number.isFinite(circleFxGlitchStrengthNum) ? Math.max(0, Math.min(100, circleFxGlitchStrengthNum)) : 60;
      const circleFxGlitchColor = String(viewEl.style?.circleFxGlitchColor || '#00ffff');
      const circleFxHasRotate = circleFxType === 'rotate' || circleFxType === 'rotate-glitch';
      const circleFxHasGlitch = circleFxType === 'glitch' || circleFxType === 'rotate-glitch';
      const titleOffsetX = parseFloat(viewEl.style?.offsetX) || 0;
      const titleOffsetY = parseFloat(viewEl.style?.offsetY) || 0;
      const heroTitleHasImage = isHeroTitle && viewEl.displayMode === 'image' && !!viewEl.imageUrl;
      const heroTitleEffectType = String(viewEl.style?.imageEffect || 'none');
      const heroTitleEffectSpeedNum = parseFloat(viewEl.style?.imageEffectSpeed);
      const heroTitleEffectSpeed = Number.isFinite(heroTitleEffectSpeedNum) ? Math.max(0.5, Math.min(20, heroTitleEffectSpeedNum)) : 8;
      const heroTitleEffectColor = String(viewEl.style?.imageEffectColor || '#00ffff');
      const heroTitleEffectStrengthNum = parseFloat(viewEl.style?.imageEffectStrength);
      const heroTitleEffectStrength = Number.isFinite(heroTitleEffectStrengthNum) ? Math.max(0, Math.min(100, heroTitleEffectStrengthNum)) : 60;

      const isMedia = el.type === 'media' || el.id === 'hero-media';
      const isImage = el.type === 'image';
      const isText = el.type === 'richtext' || el.type === 'text';

      return `
        <div class="sidebar open">
          <div class="p-4 border-b-2 border-black flex justify-between items-center">
            <h3 class="text-lg font-bold">編輯元素</h3>
            <button onclick="activeElementId=null;render();" class="text-2xl hover:text-pink-500">&times;</button>
          </div>
          ${renderDeviceModeControls()}
          <div class="p-4 space-y-4 overflow-y-auto flex-1">
            ${isText ? `
              <!-- 顯示模式切換 -->
              <div class="border-b pb-4 mb-4">
                <label class="block text-sm font-bold mb-2">顯示模式</label>
                <div class="flex gap-2">
                  <button class="flex-1 py-2 rounded ${viewEl.displayMode !== 'image' ? 'bg-black text-white' : 'bg-gray-200'}" onclick="updateElement('${el.id}', {displayMode: 'text'})">文字</button>
                  <button class="flex-1 py-2 rounded ${viewEl.displayMode === 'image' ? 'bg-black text-white' : 'bg-gray-200'}" onclick="updateElement('${el.id}', {displayMode: 'image'})">圖片</button>
                </div>
              </div>

              ${viewEl.displayMode === 'image' ? `
                <!-- 圖片模式 -->
                <div>
                  <label class="block text-sm font-bold mb-2">圖片網址</label>
                  <div class="flex gap-2">
                    <input type="text" id="img-url-input" value="${viewEl.imageUrl || ''}" class="flex-1 p-2 border-2 border-black rounded text-sm" placeholder="輸入手寫標題圖片網址">
                    <button class="px-3 py-2 bg-pink-500 text-white rounded font-bold hover:bg-pink-600 text-sm" onclick="updateElement('${el.id}', {imageUrl: document.getElementById('img-url-input').value})">套用</button>
                  </div>
                </div>
                <div class="mt-4 bg-gray-100 p-3 rounded">
                  <div class="text-xs font-bold mb-3">圖片尺寸</div>
                  <div class="space-y-3">
                    <div class="flex gap-2 items-center">
                      <label class="text-xs w-12">寬度</label>
                      <input type="number" id="img-width-input" value="${viewEl.imageWidth || 0}" min="0" max="1200" class="flex-1 p-2 border border-gray-300 rounded text-sm" placeholder="0=自動">
                      <span class="text-xs text-gray-400">px</span>
                      <button class="px-3 py-1 bg-pink-500 text-white rounded text-xs font-bold hover:bg-pink-600" onclick="updateElement('${el.id}', {imageWidth: parseInt(document.getElementById('img-width-input').value)||0})">套用</button>
                    </div>
                    <div class="flex gap-2 items-center">
                      <label class="text-xs w-12">高度</label>
                      <input type="number" id="img-height-input" value="${viewEl.imageHeight || 0}" min="0" max="800" class="flex-1 p-2 border border-gray-300 rounded text-sm" placeholder="0=自動">
                      <span class="text-xs text-gray-400">px</span>
                      <button class="px-3 py-1 bg-pink-500 text-white rounded text-xs font-bold hover:bg-pink-600" onclick="updateElement('${el.id}', {imageHeight: parseInt(document.getElementById('img-height-input').value)||0})">套用</button>
                    </div>
                    <div class="flex items-center gap-2 pt-2 border-t border-gray-300">
                      <input type="checkbox" id="img-keep-ratio" ${viewEl.keepRatio ? 'checked' : ''}>
                      <label for="img-keep-ratio" class="text-xs">等比例縮放</label>
                      <button class="px-3 py-1 bg-blue-500 text-white rounded text-xs font-bold hover:bg-blue-600 ml-auto" onclick="updateElement('${el.id}', {keepRatio: document.getElementById('img-keep-ratio').checked})">套用</button>
                    </div>
                    <p class="text-xs text-gray-400">輸入 0 表示自動大小</p>
                  </div>
                </div>
                ${viewEl.imageUrl ? `
                <div class="mt-3">
                  <div class="text-sm text-gray-500 mb-1">預覽：</div>
                  <img src="${viewEl.imageUrl}" class="object-contain border-2 border-gray-300 rounded p-2 bg-white max-w-full" style="max-height: 150px;">
                </div>
                ` : ''}
                <div class="mt-4 p-3 bg-yellow-50 border border-yellow-300 rounded text-xs">
                  <strong>提示：</strong>文字內容仍會保留，切換回文字模式時會顯示。
                </div>
              ` : `
                <!-- 文字模式 -->
                <div>
                  <label class="block text-sm font-bold mb-2">內容編輯</label>
                  <div class="p-3 bg-yellow-50 border border-yellow-400 rounded text-xs mb-3">
                    <strong>使用方式：</strong>在下方編輯框中選取文字 → 選擇樣式 → 按「套用」按鈕
                  </div>

                  <!-- 基本格式 -->
                  <div class="bg-gray-100 p-3 rounded mb-3">
                    <div class="text-xs font-bold mb-2">基本格式</div>
                    <div class="flex gap-2">
                      <button class="toolbar-btn flex-1" onmousedown="event.preventDefault();applyFormat('bold')"><b>粗體</b></button>
                      <button class="toolbar-btn flex-1" onmousedown="event.preventDefault();applyFormat('italic')"><i>斜體</i></button>
                      <button class="toolbar-btn flex-1" onmousedown="event.preventDefault();applyFormat('underline')"><u>底線</u></button>
                    </div>
                  </div>

                  <!-- 字體大小 -->
                  <div class="bg-gray-100 p-3 rounded mb-3">
                    <div class="text-xs font-bold mb-2">選取文字大小</div>
                    <div class="flex gap-2">
                      <select id="font-size-select" class="flex-1 p-2 border border-gray-300 rounded text-sm">
                        <option value="1">極小</option>
                        <option value="2">小</option>
                        <option value="3" selected>正常</option>
                        <option value="4">中</option>
                        <option value="5">大</option>
                        <option value="6">特大</option>
                        <option value="7">巨大</option>
                      </select>
                      <button class="px-4 py-2 bg-pink-500 text-white rounded font-bold hover:bg-pink-600" onmousedown="event.preventDefault();applyFontSizeCmd(document.getElementById('font-size-select').value)">套用</button>
                    </div>
                  </div>

                  <!-- 字體選擇 -->
                  <div class="bg-gray-100 p-3 rounded mb-3">
                    <div class="text-xs font-bold mb-2">選取文字字體</div>
                    <div class="flex gap-2">
                      <select id="font-family-select" class="flex-1 p-2 border border-gray-300 rounded text-sm">
                        ${AVAILABLE_FONTS.map(f => `<option value="${f.id}" style="font-family:'${f.id}'">${f.name}</option>`).join('')}
                      </select>
                      <button class="px-4 py-2 bg-pink-500 text-white rounded font-bold hover:bg-pink-600" onmousedown="event.preventDefault();applyFontNameCmd(document.getElementById('font-family-select').value)">套用</button>
                    </div>
                  </div>

                  <!-- 文字顏色 -->
                  <div class="bg-gray-100 p-3 rounded mb-3">
                    <div class="text-xs font-bold mb-2">選取文字顏色</div>
                    <div class="flex gap-2 items-center">
                      <input type="color" id="text-color-picker" value="#000000" class="w-12 h-10 cursor-pointer border-2 border-gray-300 rounded" oninput="document.getElementById('color-preview').textContent=this.value">
                      <span id="color-preview" class="flex-1 text-sm">#000000</span>
                      <button class="px-4 py-2 bg-pink-500 text-white rounded font-bold hover:bg-pink-600" onmousedown="event.preventDefault();applyFontColorCmd(document.getElementById('text-color-picker').value)">套用</button>
                    </div>
                  </div>

                  <!-- 編輯區 -->
                  <div id="rich-editor" class="rich-editor" contenteditable="true"
                       onmouseup="saveSelection()"
                       onkeyup="saveSelection()"
                       onfocus="saveSelection()">${viewEl.content}</div>
                  <div class="flex gap-2 mt-3">
                    <button class="flex-1 px-4 py-2 bg-blue-500 text-white rounded font-bold hover:bg-blue-600"
                            onclick="saveRichTextShared('${el.id}')">儲存內文（同步桌機/手機）</button>
                  </div>
                  <p class="text-xs text-gray-400 mt-1">格式（粗體/字體/顏色）桌機/手機分開；改字後按上方儲存會同步另一版。</p>
                </div>

                <!-- 整體樣式 -->
                <div class="border-t pt-4 mt-4">
                  <div class="text-sm font-bold mb-3">整體區塊樣式</div>
                  <div class="space-y-3">
                    <div class="flex gap-2 items-center">
                      <label class="text-xs w-20">整體顏色</label>
                      <input type="color" id="block-color-${el.id}" value="${viewEl.style?.color || '#000000'}" class="w-10 h-8 cursor-pointer border border-gray-300 rounded">
                      <button class="px-3 py-1 bg-blue-500 text-white rounded text-sm font-bold hover:bg-blue-600" onclick="updateElement('${el.id}', {style: {color: document.getElementById('block-color-${el.id}').value}})">套用顏色</button>
                    </div>
                    <div class="flex gap-2 items-center">
                      <label class="text-xs w-20">字體大小</label>
                      <input type="number" id="block-size-${el.id}" value="${viewEl.style?.fontSizePx || 16}" min="8" max="200" class="w-20 p-1 border border-gray-300 rounded text-sm">
                      <span class="text-xs text-gray-400">px</span>
                      <button class="px-3 py-1 bg-blue-500 text-white rounded text-sm font-bold hover:bg-blue-600" onclick="updateElement('${el.id}', {style: {fontSizePx: parseInt(document.getElementById('block-size-${el.id}').value)||16, fontSize:''}})">套用大小</button>
                    </div>
                    <p class="text-xs text-gray-400">常用大小: 14小、16正常、20中、24大、32特大、48超大、72巨大</p>
                  </div>
                </div>
              `}
            ` : isMedia ? `
              <div>
                <label class="block text-sm font-bold mb-2">媒體網址</label>
                <input type="text" value="${viewEl.content}" class="w-full p-2 border-2 border-black rounded text-sm" placeholder="圖片網址 或 YouTube 網址" onchange="updateElement('${el.id}', {content: this.value})">
                <p class="text-xs text-gray-400 mt-1">支援：圖片網址、YouTube 連結</p>
              </div>
              <div class="text-sm text-gray-500">預覽：</div>
              ${getYouTubeId(viewEl.content) ?
                `<iframe width="100%" height="150" src="https://www.youtube.com/embed/${getYouTubeId(viewEl.content)}" frameborder="0" class="rounded border-2 border-black"></iframe>` :
                `<img src="${viewEl.content}" class="w-full rounded border-2 border-black">`
              }
            ` : `
              <div>
                <label class="block text-sm font-bold mb-2">圖片網址</label>
                <input type="text" value="${viewEl.content}" class="w-full p-2 border-2 border-black rounded" onchange="updateElement('${el.id}', {content: this.value})">
              </div>
              <div class="text-sm text-gray-500">預覽：</div>
              <img src="${viewEl.content}" class="w-full rounded border-2 border-black">
            `}
            <div>
              <label class="block text-sm font-bold mb-2">旋轉角度: ${viewEl.style?.rotation || 0}°</label>
              <input type="range" min="-10" max="10" step="0.5" value="${viewEl.style?.rotation || 0}" class="w-full" onchange="updateElement('${el.id}', {style: {rotation: parseFloat(this.value)}})">
            </div>
            ${isHeroTitle ? `
              <div class="border-t pt-4 mt-4">
                <div class="text-sm font-bold mb-3">主標題位置 (X / Y)</div>
                <div class="space-y-3">
                  <div>
                    <label class="text-xs font-bold">水平偏移 X: ${titleOffsetX}px</label>
                    <input type="range" min="-600" max="600" value="${titleOffsetX}" class="w-full" onchange="updateElement('${el.id}', {style: {offsetX: parseInt(this.value)||0}})">
                  </div>
                  <div>
                    <label class="text-xs font-bold">垂直偏移 Y: ${titleOffsetY}px</label>
                    <input type="range" min="-800" max="800" value="${titleOffsetY}" class="w-full" onchange="updateElement('${el.id}', {style: {offsetY: parseInt(this.value)||0}})">
                  </div>
                  <div class="p-3 bg-blue-50 border border-blue-300 rounded text-xs">
                    <strong>提示：</strong>這是位移微調（translate），可在手機/桌機分別設定。
                  </div>
                </div>
              </div>
              ${heroTitleHasImage ? `
                <div class="border-t pt-4 mt-4">
                  <div class="text-sm font-bold mb-3">主標題圖片特效</div>
                  <div class="space-y-3">
                    <div>
                      <label class="text-xs font-bold">特效類型</label>
                      <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateElement('${el.id}', {style: {imageEffect: this.value}})">
                        <option value="none" ${heroTitleEffectType === 'none' ? 'selected' : ''}>無</option>
                        <option value="flicker" ${heroTitleEffectType === 'flicker' ? 'selected' : ''}>緩慢閃動</option>
                        <option value="neon" ${heroTitleEffectType === 'neon' ? 'selected' : ''}>霓虹燈管</option>
                        <option value="ripple" ${heroTitleEffectType === 'ripple' ? 'selected' : ''}>水波紋</option>
                      </select>
                    </div>

                    ${heroTitleEffectType !== 'none' ? `
                      <div>
                        <label class="text-xs font-bold">速度: ${heroTitleEffectSpeed}s</label>
                        <input type="range" min="0.5" max="20" step="0.5" value="${heroTitleEffectSpeed}" class="w-full" onchange="updateElement('${el.id}', {style: {imageEffectSpeed: parseFloat(this.value)}})">
                      </div>
                    ` : ''}

                    ${(heroTitleEffectType === 'flicker' || heroTitleEffectType === 'neon') ? `
                      <div>
                        <label class="text-xs font-bold">顏色</label>
                        <div class="flex gap-2 items-center mt-1">
                          <input type="color" value="${heroTitleEffectColor}" class="w-12 h-10 cursor-pointer border border-gray-300 rounded" onchange="updateElement('${el.id}', {style: {imageEffectColor: this.value}})">
                          <input type="text" value="${heroTitleEffectColor}" class="flex-1 p-2 border border-gray-300 rounded text-sm" onchange="updateElement('${el.id}', {style: {imageEffectColor: this.value}})">
                        </div>
                      </div>
                    ` : ''}

                    ${heroTitleEffectType !== 'none' ? `
                      <div>
                        <label class="text-xs font-bold">${heroTitleEffectType === 'ripple' ? '波紋強度' : '光暈強度'}: ${heroTitleEffectStrength}</label>
                        <input type="range" min="0" max="100" value="${heroTitleEffectStrength}" class="w-full" onchange="updateElement('${el.id}', {style: {imageEffectStrength: parseInt(this.value)}})">
                      </div>
                    ` : ''}

                    <div class="p-3 bg-blue-50 border border-blue-300 rounded text-xs">
                      <strong>提示：</strong>特效可在手機/桌機分別設定；水波紋在手機上建議降低強度以減少遮擋與耗效能。
                    </div>
                  </div>
                </div>
              ` : ''}
            ` : ''}
            ${isDecoCircle ? `
              <div class="border-t pt-4 mt-4">
                <div class="text-sm font-bold mb-3">圓形裝飾（尺寸 / 位置）</div>
                <div class="space-y-3">
                  <div>
                    <label class="text-xs font-bold">尺寸（直徑）: ${circleSize}px</label>
                    <input type="range" min="40" max="520" value="${circleSize}" class="w-full" onchange="updateElement('deco-circle', {size: parseInt(this.value)||160})">
                  </div>
                  <div>
                    <label class="text-xs font-bold">圖片透明度: ${circleOpacity}%</label>
                    <input type="range" min="0" max="100" value="${circleOpacity}" class="w-full" onchange="updateElement('deco-circle', {style: {opacity: parseInt(this.value), opacityEdited: true}})">
                  </div>
                  <div>
                    <label class="text-xs font-bold">捲動行為</label>
                    <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateElement('deco-circle', {positionMode: this.value})">
                      <option value="absolute" ${circlePosMode === 'absolute' ? 'selected' : ''}>固定在頁面（捲動時會離開畫面，較不遮擋）</option>
                      <option value="fixed" ${circlePosMode === 'fixed' ? 'selected' : ''}>固定在畫面（捲動時不動，可能遮擋）</option>
                    </select>
                  </div>
                  <div>
                    <label class="text-xs font-bold">水平基準</label>
                    <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateElement('deco-circle', {anchorX: this.value})">
                      <option value="left" ${circleAnchorX === 'left' ? 'selected' : ''}>左側</option>
                      <option value="right" ${circleAnchorX === 'right' ? 'selected' : ''}>右側</option>
                    </select>
                  </div>
                  <div>
                    <label class="text-xs font-bold">水平偏移（距離${circleAnchorX === 'right' ? '右' : '左'}側）: ${circlePosX}px</label>
                    <input type="range" min="-200" max="1000" value="${circlePosX}" class="w-full" onchange="updateElement('deco-circle', {posX: parseInt(this.value)})">
                  </div>
                  <div>
                    <label class="text-xs font-bold">垂直偏移（距離上方）: ${circlePosY}px</label>
                    <input type="range" min="-200" max="2000" value="${circlePosY}" class="w-full" onchange="updateElement('deco-circle', {posY: parseInt(this.value)})">
                  </div>

                  <div class="border-t pt-3 mt-3">
                    <div class="text-xs font-bold mb-2">圖片特效</div>
                    <div class="space-y-3">
                      <div>
                        <label class="text-xs font-bold">特效類型</label>
                        <select class="w-full p-2 border border-gray-300 rounded text-sm mt-1" onchange="updateElement('deco-circle', {style: {circleFxType: this.value}})">
                          <option value="none" ${circleFxType === 'none' ? 'selected' : ''}>無</option>
                          <option value="rotate" ${circleFxType === 'rotate' ? 'selected' : ''}>緩慢旋轉</option>
                          <option value="glitch" ${circleFxType === 'glitch' ? 'selected' : ''}>Glitch</option>
                          <option value="rotate-glitch" ${circleFxType === 'rotate-glitch' ? 'selected' : ''}>旋轉 + Glitch</option>
                        </select>
                      </div>

                      ${circleFxHasRotate ? `
                        <div>
                          <label class="text-xs font-bold">旋轉速度: ${circleFxRotateSpeed}s/圈</label>
                          <input type="range" min="5" max="200" step="1" value="${circleFxRotateSpeed}" class="w-full" onchange="updateElement('deco-circle', {style: {circleFxRotateSpeed: parseFloat(this.value)}})">
                        </div>
                      ` : ''}

                      ${circleFxHasGlitch ? `
                        <div>
                          <label class="text-xs font-bold">Glitch 速度: ${circleFxGlitchSpeed}s</label>
                          <input type="range" min="0.3" max="10" step="0.1" value="${circleFxGlitchSpeed}" class="w-full" onchange="updateElement('deco-circle', {style: {circleFxGlitchSpeed: parseFloat(this.value)}})">
                        </div>
                        <div>
                          <label class="text-xs font-bold">Glitch 強度: ${circleFxGlitchStrength}</label>
                          <input type="range" min="0" max="100" step="1" value="${circleFxGlitchStrength}" class="w-full" onchange="updateElement('deco-circle', {style: {circleFxGlitchStrength: parseInt(this.value)}})">
                        </div>
                        <div>
                          <label class="text-xs font-bold">Glitch 顏色</label>
                          <div class="flex gap-2 items-center mt-1">
                            <input type="color" value="${circleFxGlitchColor}" class="w-12 h-10 cursor-pointer border border-gray-300 rounded" onchange="updateElement('deco-circle', {style: {circleFxGlitchColor: this.value}})">
                            <input type="text" value="${circleFxGlitchColor}" class="flex-1 p-2 border border-gray-300 rounded text-sm" onchange="updateElement('deco-circle', {style: {circleFxGlitchColor: this.value}})">
                          </div>
                        </div>
                      ` : ''}

                      <div class="p-3 bg-blue-50 border border-blue-300 rounded text-xs">
                        <strong>提示：</strong>特效可在手機/桌機分別設定；手機若卡頓可降低 Glitch 強度或改用單一旋轉。
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ` : ''}
            ${(getActiveDevice() === 'mobile' && el.mobile) ? `
              <button onclick="clearElementMobileOverrides('${el.id}')" class="w-full py-2 border-2 border-black rounded hover:bg-gray-100 text-sm">清除手機版覆寫</button>
            ` : ''}
          </div>
        </div>
      `;
    }

    // ============ 富文本編輯功能（修正版）============
    function applyFormat(cmd) {
      restoreSelection();
      document.execCommand(cmd, false, null);
      saveSelection();
    }

    function applyFontSizeCmd(size) {
      restoreSelection();
      document.execCommand('fontSize', false, size);
      saveSelection();
    }

    function applyFontNameCmd(font) {
      restoreSelection();
      document.execCommand('fontName', false, font);
      saveSelection();
    }

    function applyFontColorCmd(color) {
      restoreSelection();
      document.execCommand('foreColor', false, color);
      saveSelection();
    }

    function normalizeSyncedText(text) {
      return String(text || '')
        .replace(/\r\n/g, '\n')
        .replace(/\r/g, '\n')
        .replace(/\u00a0/g, ' ')
        .trim();
    }

    const TEXT_SYNC_BLOCK_TAGS = new Set([
      'DIV', 'P', 'PRE', 'LI', 'UL', 'OL',
      'H1', 'H2', 'H3', 'H4', 'H5', 'H6',
      'SECTION', 'ARTICLE', 'HEADER', 'FOOTER'
    ]);

    function appendNewline(out) {
      if (!out.length) {
        out.push('\n');
        return;
      }
      const last = out[out.length - 1] || '';
      if (last.endsWith('\n')) return;
      out.push('\n');
    }

    function htmlNodeToPlainText(node, out) {
      if (!node) return;
      if (node.nodeType === Node.TEXT_NODE) {
        out.push(node.nodeValue || '');
        return;
      }
      if (node.nodeType !== Node.ELEMENT_NODE) return;

      const tag = node.tagName;
      if (tag === 'BR') {
        out.push('\n');
        return;
      }

      const isBlock = TEXT_SYNC_BLOCK_TAGS.has(tag);
      if (isBlock) appendNewline(out);
      node.childNodes.forEach(child => htmlNodeToPlainText(child, out));
      if (isBlock) appendNewline(out);
    }

    function htmlToPlainText(html) {
      const wrapper = document.createElement('div');
      wrapper.innerHTML = String(html || '');
      const out = [];
      wrapper.childNodes.forEach(child => htmlNodeToPlainText(child, out));
      return out.join('');
    }

    const TEXT_SYNC_SKIP_TAGS = new Set(['SCRIPT', 'STYLE', 'NOSCRIPT']);
    function isInsideSkippedTag(node) {
      let cur = node && node.parentNode;
      while (cur && cur.nodeType === Node.ELEMENT_NODE) {
        if (TEXT_SYNC_SKIP_TAGS.has(cur.tagName)) return true;
        cur = cur.parentNode;
      }
      return false;
    }

    function applyPlainTextToHtmlPreservingMarkup(html, plainText) {
      const template = document.createElement('template');
      template.innerHTML = String(html || '');

      const nodes = [];
      const walker = document.createTreeWalker(template.content, NodeFilter.SHOW_TEXT);
      let n = walker.nextNode();
      while (n) {
        if (!isInsideSkippedTag(n)) nodes.push(n);
        n = walker.nextNode();
      }

      if (!nodes.length) return String(html || '');

      const nextText = String(plainText || '');
      if (nodes.length === 1) {
        nodes[0].nodeValue = nextText;
        return template.innerHTML;
      }

      const lengths = nodes.map(node => (node.nodeValue || '').length);
      const total = lengths.reduce((acc, len) => acc + len, 0);
      if (!Number.isFinite(total) || total <= 0) {
        nodes[0].nodeValue = nextText;
        for (let i = 1; i < nodes.length; i++) nodes[i].nodeValue = '';
        return template.innerHTML;
      }

      let offset = 0;
      let acc = 0;
      for (let i = 0; i < nodes.length; i++) {
        const isLast = i === nodes.length - 1;
        let take = 0;
        if (isLast) {
          take = Math.max(0, nextText.length - offset);
        } else {
          acc += (lengths[i] / total) * nextText.length;
          take = Math.max(0, Math.floor(acc) - offset);
        }
        nodes[i].nodeValue = nextText.slice(offset, offset + take);
        offset += take;
      }

      return template.innerHTML;
    }

    function getElementContentForDevice(el, device) {
      if (!el) return '';
      if (device === 'mobile') {
        if (el.mobile && typeof el.mobile.content === 'string') return el.mobile.content;
        return (typeof el.content === 'string') ? el.content : '';
      }
      return (typeof el.content === 'string') ? el.content : '';
    }

    function setElementContentForDevice(el, device, html, opts = {}) {
      if (!el) return;
      if (device === 'mobile') {
        if (!el.mobile) el.mobile = {};
        el.mobile.content = String(html || '');
        return;
      }
      el.content = String(html || '');
    }

    function saveRichTextShared(id) {
      const editor = document.getElementById('rich-editor');
      if (!editor) return;

      const el = findElement(id);
      if (!el) return;

      const device = getActiveDevice();
      const html = editor.innerHTML;
      const plain = normalizeSyncedText(editor.innerText || editor.textContent || '');

      // 1) 先儲存目前模式的 HTML（格式分開）
      setElementContentForDevice(el, device, html);

      // 2) 同步「文字」到另一個模式（不動另一邊的格式）
      const otherDevice = device === 'mobile' ? 'desktop' : 'mobile';
      const shouldSyncOther =
        otherDevice === 'desktop'
          ? true
          : !!(el.mobile && typeof el.mobile.content === 'string'); // 只有 mobile 有覆寫時才需要同步

      if (shouldSyncOther) {
        const otherHtml = getElementContentForDevice(el, otherDevice);
        const otherPlain = normalizeSyncedText(htmlToPlainText(otherHtml));
        if (otherPlain !== plain) {
          const nextOtherHtml = applyPlainTextToHtmlPreservingMarkup(otherHtml, plain);
          setElementContentForDevice(el, otherDevice, nextOtherHtml);
        }
      }

      saveData();
    }

    // ============ 輪播渲染 ============
    function renderCarousel() {
      const items = siteData.hero.mediaItems || [];
      let currentIndex = siteData.hero.currentMediaIndex || 0;
      if (!Number.isFinite(currentIndex) || currentIndex < 0 || currentIndex >= items.length) currentIndex = 0;
      const currentItemBase = items[currentIndex];
      if (!currentItemBase) return '';
      const currentItem = getResponsiveElement(currentItemBase);

      const boxStyle = getBoxStyle('mediaBox');
      const borderStyle = `border: ${boxStyle.borderWidth}px solid ${boxStyle.borderColor};`;
      const bgStyle = 'background: ' + hexToRgba(boxStyle.bgColor || '#ffffff', boxStyle.bgOpacity ?? 100) + ';';
      const shadowStyle = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(boxStyle.shadowColor || '#000000', boxStyle.shadowOpacity ?? 80) + ';';
      const maxWidthStyle = boxStyle.maxWidth ? `max-width: ${boxStyle.maxWidth}px;` : '';
      const maxHeightStyle = boxStyle.maxHeight ? `max-height: ${boxStyle.maxHeight}px;` : '';

      const youtubeId = getYouTubeId(currentItem.content);
      let mediaContent = '';
      if (youtubeId) {
        mediaContent = `<iframe width="100%" height="450" src="https://www.youtube.com/embed/${youtubeId}" frameborder="0" allowfullscreen class="rounded block"></iframe>`;
      } else if (currentItem.content && (currentItem.content.includes('.mp4') || currentItem.content.includes('.webm'))) {
        mediaContent = `<video src="${currentItem.content}" controls class="block max-w-full h-auto rounded"></video>`;
      } else {
        mediaContent = `<img src="${currentItem.content}" alt="圖片" class="block max-w-full h-auto rounded">`;
      }

      const showNav = items.length > 1;
      return `
        <div id="hero-carousel-container" class="media-container relative cursor-pointer carousel-container"
             style="${borderStyle} ${bgStyle} ${shadowStyle} ${maxWidthStyle} ${maxHeightStyle} overflow: hidden; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; transform: rotate(1deg);"
             onclick="${isAdmin ? '' : 'nextMedia()'}">
          <div id="hero-carousel-stage" class="carousel-stage">
            <div id="hero-carousel-media" class="carousel-layer carousel-layer-current">${mediaContent}</div>
          </div>
          ${showNav ? `
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
              ${items.map((_, idx) => `
                <span class="w-3 h-3 rounded-full ${idx === currentIndex ? 'bg-pink-500' : 'bg-gray-400'} inline-block"></span>
              `).join('')}
            </div>
            ${!isAdmin ? `
              <div class="absolute inset-0 flex items-center justify-between px-4 opacity-0 hover:opacity-100 transition-opacity">
                <button onclick="event.stopPropagation();prevMedia()" class="w-10 h-10 bg-black/50 text-white rounded-full text-xl hover:bg-black/70">&lt;</button>
                <button onclick="event.stopPropagation();nextMedia()" class="w-10 h-10 bg-black/50 text-white rounded-full text-xl hover:bg-black/70">&gt;</button>
              </div>
            ` : ''}
          ` : ''}
          ${isAdmin ? `<div class="absolute inset-0 admin-highlight" onclick="selectElement('carousel-settings')"></div>` : ''}
        </div>
      `;
    }

    function renderLoginModal() {
      return `
        <div class="modal-bg" id="login-modal" style="display:none;">
          <form onsubmit="handleLogin(event)" class="bg-white sketch-border sketch-shadow p-10 max-w-sm w-full space-y-6" style="transform: rotate(1deg);">
            <div class="text-center">
              <h2 class="text-3xl font-bold mb-2">後台登入</h2>
              <p class="text-sm opacity-60">請輸入管理密碼以開啟編輯模式</p>
            </div>
            <input type="password" id="password-input" placeholder="請輸入密碼..." class="w-full p-4 border-2 border-black rounded text-center text-xl outline-none focus:ring-4 focus:ring-yellow-200">
            <div class="flex gap-4">
              <button type="submit" class="flex-1 bg-black text-white py-3 rounded-full font-bold hover:bg-gray-800">進入</button>
              <button type="button" onclick="hideLoginModal()" class="flex-1 border-2 border-black py-3 rounded-full font-bold hover:bg-gray-100">取消</button>
            </div>
          </form>
        </div>
      `;
    }

    function render() {
      const d = siteData;
      document.getElementById('app').innerHTML = `
        <div class="${isAdmin ? 'admin-mode' : ''} min-h-screen relative">
          ${IS_PREVIEW ? '' : `
            <div class="fixed bottom-4 right-4 z-[2100] flex flex-col gap-2">
              ${!isAdmin ? `
                <button onclick="showLoginModal()" class="admin-btn" title="後台管理"></button>
              ` : `
                <button onclick="selectElement('background-settings')" class="admin-btn" style="background: #4CAF50;" title="網站設定"></button>
                <button onclick="exitAdmin()" class="admin-btn" style="background: #333;" title="退出編輯"></button>
              `}
            </div>
          `}

          ${IS_PREVIEW ? '' : renderLoginModal()}
          ${renderSidebar()}

          <main class="content-area max-w-4xl mx-auto py-24 px-8">
            <div class="text-center mb-24">
              ${renderElement(d.hero.title, 'mb-8')}
              ${renderElement(d.hero.subtitle, 'mb-16')}
              <div id="hero-carousel-slot">
                ${renderCarousel()}
              </div>
            </div>

            ${(() => {
              const ms = getBoxStyle('manifestoBox');
              const msBg = hexToRgba(ms.bgColor || '#ffffff', ms.bgOpacity ?? 50);
              const msShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(ms.shadowColor || '#000000', ms.shadowOpacity ?? 80) + ';';
              const manifestoAlignRaw = String(ms.contentAlign || 'left');
              const manifestoAlign =
                (manifestoAlignRaw === 'left' || manifestoAlignRaw === 'center' || manifestoAlignRaw === 'right')
                  ? manifestoAlignRaw
                  : 'left';
              const collapseEnabled = ms.collapseEnabled !== false;
              const collapsedHeightRaw = parseFloat(ms.collapsedHeight || 0);
              const defaultCollapsedHeight = getActiveDevice() === 'mobile' ? 280 : 420;
              const collapsedHeight =
                (Number.isFinite(collapsedHeightRaw) && collapsedHeightRaw > 0)
                  ? Math.round(collapsedHeightRaw)
                  : defaultCollapsedHeight;
              const shouldCollapse = collapseEnabled && !isAdmin && !manifestoExpanded;
              const manifestoContentClass = shouldCollapse
                ? 'manifesto-content manifesto-collapsed space-y-8'
                : 'manifesto-content manifesto-expanded space-y-8';
              const manifestoContentStyle = shouldCollapse ? `max-height: ${collapsedHeight}px;` : '';
              const manifestoContentClick = shouldCollapse ? 'onclick="expandManifesto(event)"' : '';
              const manifestoMoreHtml = shouldCollapse
                ? '<div class="manifesto-more"><span class="manifesto-more-label">...more</span></div>'
                : '';
              return `
                <div class="manifesto-box p-12 mb-24 relative shadow-inner ${isAdmin ? 'admin-highlight' : ''}"
                     style="background: ${msBg}; border: ${ms.borderWidth}px solid ${ms.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; ${msShadow} text-align: ${manifestoAlign}; --manifesto-bg: ${msBg};"
                     ${isAdmin ? 'onclick="selectElement(\'box-manifesto\')"' : ''}>
                  <div class="absolute -top-10 left-0 text-9xl opacity-10 select-none">"</div>
                  <div id="manifesto-content" class="${manifestoContentClass}" style="${manifestoContentStyle}" ${manifestoContentClick}>
                    ${d.manifesto.paragraphs.map(p => renderElement(p)).join('')}
                    ${manifestoMoreHtml}
                  </div>
                  <div class="absolute -bottom-20 right-0 text-9xl opacity-10 select-none" style="transform: rotate(180deg);">"</div>
                </div>
              `;
            })()}

            <div class="mb-24">
              ${renderElement(d.actions.title, 'text-center mb-16')}
              <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                ${(() => {
                  const as = getBoxStyle('actionBox');
                  const asBg = hexToRgba(as.bgColor || '#ffffff', as.bgOpacity ?? 100);
                  const asShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(as.shadowColor || '#000000', as.shadowOpacity ?? 80) + ';';
                  return d.actions.items.map((item, idx) => `
                    <div class="p-8 ${isAdmin ? 'admin-highlight' : ''}"
                         style="background: ${asBg}; border: ${as.borderWidth}px solid ${as.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; transform: rotate(${idx % 2 === 0 ? 1 : -1}deg); ${asShadow}"
                         ${isAdmin ? 'onclick="event.stopPropagation();selectElement(\'box-action\')"' : ''}>
                      ${renderElement(item)}
                    </div>
                  `).join('');
                })()}
              </div>
            </div>

            <!-- 索取徽章地點 -->
            ${(() => {
              const ls = getBoxStyle('locationsBox');
              const lsBg = hexToRgba(ls.bgColor || '#FFF8E7', ls.bgOpacity ?? 100);
              const lsShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(ls.shadowColor || '#000000', ls.shadowOpacity ?? 80) + ';';
              const locations = siteData.locations?.items || [];
              return `
                <div class="mb-24">
                  ${renderElement(d.locations?.title || siteData.locations?.title, 'text-center mb-12')}
                  <div class="p-8 ${isAdmin ? 'admin-highlight' : ''}"
                       style="background: ${lsBg}; border: ${ls.borderWidth}px solid ${ls.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; ${lsShadow}"
                       ${isAdmin ? 'onclick="selectElement(\'locations-settings\')"' : ''}>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                      ${locations.map((loc, idx) => `
                        <div class="p-4 bg-white/80 rounded-lg" style="transform: rotate(${idx % 2 === 0 ? 0.5 : -0.5}deg);">
                          <div class="font-bold text-lg mb-1">${loc.name}</div>
                          <div class="text-sm text-gray-600 mb-1">${loc.address}</div>
                          <div class="text-xs text-pink-600">${loc.note}</div>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                </div>
              `;
            })()}

            <!-- 贊助廠商 / 參與藝術家 -->
            ${(() => {
              const ss = getBoxStyle('supportersBox');
              const ssBg = hexToRgba(ss.bgColor || '#E7F0FF', ss.bgOpacity ?? 100);
              const ssShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(ss.shadowColor || '#000000', ss.shadowOpacity ?? 80) + ';';
              const sponsors = siteData.supporters?.sponsors || [];
              const artists = siteData.supporters?.artists || [];
              return `
                <div class="mb-24">
                  ${renderElement(d.supporters?.title || siteData.supporters?.title, 'text-center mb-12')}
                  <div class="p-8 ${isAdmin ? 'admin-highlight' : ''}"
                       style="background: ${ssBg}; border: ${ss.borderWidth}px solid ${ss.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; ${ssShadow}"
                       ${isAdmin ? 'onclick="selectElement(\'supporters-settings\')"' : ''}>
 
                    ${sponsors.length > 0 ? `
                      <div class="mb-8">
                        <h4 class="text-center text-lg font-bold mb-4 opacity-60">贊助廠商</h4>
                        <div class="flex flex-wrap justify-center gap-6">
                          ${sponsors.map(sp => {
                            const logoUrl = (sp.logo && String(sp.logo).trim()) || '';
                            const hasLogo = !!logoUrl;
                            const hasUrl = !!(sp.url && String(sp.url).trim());
                            const inner = `
                              ${hasLogo ? `<img src="${logoUrl}" alt="${sp.name}" class="h-16 object-contain" title="${sp.name}" style="visibility:hidden" onload="this.style.visibility='visible';this.nextElementSibling && (this.nextElementSibling.style.display='none');" onerror="this.style.display='none';this.nextElementSibling && (this.nextElementSibling.style.display='flex');">` : ''}
                              <div class="h-16 px-4 ${hasLogo ? '' : ''} flex items-center justify-center border-2 border-black rounded bg-white/80 text-sm font-bold" style="${hasLogo ? 'display:none;' : ''}" title="${sp.name}">${sp.name}</div>
                            `;
                            const wrapClass = `block transition-transform ${hasUrl ? 'hover:scale-110' : ''}`;
                            return hasUrl
                              ? `<a href="${sp.url}" target="_blank" rel="noopener noreferrer" class="${wrapClass}">${inner}</a>`
                              : `<div class="${wrapClass}">${inner}</div>`;
                          }).join('')}
                        </div>
                      </div>
                    ` : ''}

                    ${artists.length > 0 ? `
                      <div>
                        <h4 class="text-center text-lg font-bold mb-4 opacity-60">參與藝術家</h4>
                        <div class="flex flex-wrap justify-center gap-6">
                          ${artists.map(art => {
                            const hasAvatar = !!(art.avatar && String(art.avatar).trim());
                            const hasUrl = !!(art.url && String(art.url).trim());
                            const inner = `
                              ${hasAvatar ? `<img src="${art.avatar}" alt="${art.name}" class="w-16 h-16 rounded-full object-cover mx-auto mb-2 border-2 border-black" style="visibility:hidden" onload="this.style.visibility='visible'" onerror="this.style.display='none';">` : ''}
                              <div class="text-sm font-bold">${art.name}</div>
                            `;
                            const wrapClass = `text-center transition-transform ${hasUrl ? 'hover:scale-110' : ''}`;
                            return hasUrl
                              ? `<a href="${art.url}" target="_blank" rel="noopener noreferrer" class="${wrapClass}">${inner}</a>`
                              : `<div class="${wrapClass}">${inner}</div>`;
                          }).join('')}
                        </div>
                      </div>
                    ` : ''}
                  </div>
                </div>
              `;
            })()}

            <!-- 圖檔下載 -->
            ${(() => {
              const ds = getBoxStyle('downloadsBox');
              const dsBg = hexToRgba(ds.bgColor || '#F0FFF0', ds.bgOpacity ?? 100);
              const dsShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(ds.shadowColor || '#000000', ds.shadowOpacity ?? 80) + ';';
              const downloads = siteData.downloads?.items || [];
              const viewDownloads = downloads.map(dl => getResponsiveElement(dl));
              const hasDownloads = viewDownloads.some(dl => dl.url);
              if (!hasDownloads && !isAdmin) return '';
              return `
                <div class="mb-24">
                  ${renderElement(siteData.downloads?.title, 'text-center mb-12')}
                  <div class="p-8 ${isAdmin ? 'admin-highlight' : ''}"
                       style="background: ${dsBg}; border: ${ds.borderWidth}px solid ${ds.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; ${dsShadow}"
                       ${isAdmin ? 'onclick="selectElement(\'downloads-settings\')"' : ''}>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                      ${viewDownloads.filter(dl => dl.url || isAdmin).map((dl, idx) => `
                        ${isAdmin ? `
                          <div class="p-4 bg-white/80 rounded-lg text-center hover:scale-105 transition-transform cursor-pointer ${!dl.url ? 'opacity-50' : ''}"
                               style="transform: rotate(${idx % 2 === 0 ? 0.5 : -0.5}deg);">
                            <div class="font-bold text-lg mb-1">${dl.name}</div>
                            <div class="text-sm text-gray-600">${dl.description || ''}</div>
                            ${!dl.url ? '<div class="text-xs text-red-500 mt-1">(尚未設定連結)</div>' : ''}
                          </div>
                        ` : `
                          <a href="${dl.url}" download target="_blank" rel="noopener noreferrer"
                             class="p-4 bg-white/80 rounded-lg text-center hover:scale-105 transition-transform"
                             style="transform: rotate(${idx % 2 === 0 ? 0.5 : -0.5}deg);">
                            <div class="font-bold text-lg mb-1">${dl.name}</div>
                            <div class="text-sm text-gray-600">${dl.description || ''}</div>
                          </a>
                        `}
                      `).join('')}
                    </div>
                  </div>
                </div>
              `;
            })()}

            ${(() => {
              const db = getBoxStyle('dashedBorder');
              const fs = getBoxStyle('footerBox');
              const fsBg = hexToRgba(fs.bgColor || '#FF00A0', fs.bgOpacity ?? 100);
              const fsShadow = 'box-shadow: 6px 6px 0px 0px ' + hexToRgba(fs.shadowColor || '#000000', fs.shadowOpacity ?? 80) + ';';
              const igLink = siteData.instagramLink || '';
              return `
                <div class="text-center pt-24 ${isAdmin ? 'admin-highlight' : ''}" style="border-top: ${db.width}px dashed ${db.color};" ${isAdmin ? 'onclick="selectElement(\'box-dashed\')"' : ''}>
                  <a href="${igLink}" target="_blank" rel="noopener noreferrer" class="content-box text-white inline-block cursor-pointer hover:scale-105 transition-transform"
                       style="background: ${fsBg}; border: ${fs.borderWidth}px solid ${fs.borderColor}; border-radius: 255px 15px 225px 15px/15px 225px 15px 255px; transform: rotate(1deg); ${fsShadow} text-decoration: none;">
                    ${renderElement(d.footer.contact)}
                  </a>
              `;
            })()}
              ${(() => {
                const hashtags = getResponsiveElement(siteData.footer?.hashtags || INITIAL_DATA.footer.hashtags);
                const hashtagOpacity = (hashtags.style?.opacity ?? 60) / 100;
                return `
                  <div class="mt-16 flex justify-center ${isAdmin ? 'admin-highlight cursor-pointer' : ''} ${activeElementId === 'footer-hashtags' ? 'ring-4 ring-pink-500' : ''}"
                       style="opacity: ${hashtagOpacity}; color: ${hashtags.style?.color || '#000000'};"
                       ${isAdmin ? 'onclick="event.stopPropagation();selectElement(\'footer-hashtags\')"' : ''}>
                    <div class="${hashtags.style?.fontSize || 'text-xl'}">${hashtags.content}</div>
                  </div>
                `;
              })()}
            </div>
          </main>

          <div class="fixed inset-0 pointer-events-none -z-20 opacity-20">
            <div class="absolute bottom-40 left-10 w-60 h-2 border-b-2 border-black" style="transform: rotate(-6deg);"></div>
          </div>

          <!-- 左側動畫區域 (PNG 序列) -->
          ${(() => {
            const leftAnimBase = siteData.decoration?.leftAnimation;
            const leftAnim = getResponsiveObject(leftAnimBase);
            const useSequence = leftAnim?.useSequence !== false;
            const scrollWithPage = leftAnim?.scrollWithPage === true;
            const posX = leftAnim?.posX ?? 30;
            const posY = leftAnim?.posY ?? 50;
            const positionClass = scrollWithPage ? 'absolute' : 'fixed';
            const positionStyle = scrollWithPage ? `left: ${posX}px; top: ${posY}px;` : `left: ${posX}px; top: ${posY}%;`;
            return `
              <div id="left-anim-sequence" class="${positionClass} z-10 ${isAdmin ? 'pointer-events-auto' : 'pointer-events-none'}"
                   style="${positionStyle}">
                <div
                  class="${isAdmin ? 'admin-highlight cursor-pointer' : ''} ${activeElementId === 'left-animation' ? 'ring-4 ring-pink-500' : ''}"
                  style="width: ${leftAnim?.width || 200}px; height: ${leftAnim?.height || 300}px; ${scrollWithPage ? '' : 'transform: translateY(-50%);'}"
                  ${isAdmin ? 'onclick="selectElement(\'left-animation\')"' : ''}
                >
                  ${useSequence ?
                    `<img src="./docs/assets/sequence/frame_00000.png" class="w-full h-full object-contain" alt="動畫">` :
                    `<div class="w-full h-full border-2 border-dashed border-gray-400 rounded flex items-center justify-center text-gray-400 text-sm text-center p-4 bg-gray-50/50">
                      PNG 序列動畫已關閉
                    </div>`
                  }
                </div>
              </div>
            `;
          })()}

          ${(() => {
            const circle = getResponsiveElement(d.decoration?.circleImage);
            const defaultPosMode = getActiveDevice() === 'mobile' ? 'absolute' : 'fixed';
            const posMode = circle?.positionMode || defaultPosMode; // fixed | absolute
            const anchorX = circle?.anchorX || 'right'; // left | right
            const posX = (circle?.posX ?? 80);
            const posY = (circle?.posY ?? 80);
            const posClass = posMode === 'fixed' ? 'fixed' : 'absolute';
            const posStyle = `top:${posY}px; ${anchorX}:${posX}px;`;
            const circleSize = parseInt(circle?.size ?? 160) || 160;
            const circleOpacity = getCircleImageOpacityPercent(circle);
            const fxType = String(circle?.style?.circleFxType || 'none'); // none | rotate | glitch | rotate-glitch
            const fxRotateSpeedNum = parseFloat(circle?.style?.circleFxRotateSpeed);
            const fxRotateSpeed = Number.isFinite(fxRotateSpeedNum) ? Math.max(5, Math.min(200, fxRotateSpeedNum)) : 60;
            const fxGlitchSpeedNum = parseFloat(circle?.style?.circleFxGlitchSpeed);
            const fxGlitchSpeed = Number.isFinite(fxGlitchSpeedNum) ? Math.max(0.3, Math.min(10, fxGlitchSpeedNum)) : 2.5;
            const fxGlitchStrengthNum = parseFloat(circle?.style?.circleFxGlitchStrength);
            const fxGlitchStrength = Number.isFinite(fxGlitchStrengthNum) ? Math.max(0, Math.min(100, fxGlitchStrengthNum)) : 60;
            const fxGlitchColor = String(circle?.style?.circleFxGlitchColor || '#00ffff');
            const fxShift = Math.max(0, Math.round((fxGlitchStrength / 100) * 8));
            const fxOpacity = Math.min(0.9, Math.max(0, (fxGlitchStrength / 100) * 0.85));
            const fxClass =
              fxType === 'rotate' ? 'circle-img-fx-rotate'
              : fxType === 'glitch' ? 'circle-img-fx-glitch'
              : fxType === 'rotate-glitch' ? 'circle-img-fx-rotate-glitch'
              : '';
            const fxVars = circle?.content
              ? `opacity:${circleOpacity / 100};--circle-fx-image:url('${circle.content}');--circle-fx-rot-speed:${fxRotateSpeed}s;--circle-fx-glitch-speed:${fxGlitchSpeed}s;--circle-fx-glitch-color:${fxGlitchColor};--circle-fx-glitch-opacity:${fxOpacity};--circle-fx-glitch-shift:${fxShift}px;--circle-fx-glitch-shift-neg:${-fxShift}px;`
              : `opacity:${circleOpacity / 100};`;
            return `
              <div class="${posClass} z-10 ${isAdmin ? 'pointer-events-auto' : 'pointer-events-none'}" style="${posStyle}">
                <div
                  class="rounded-full overflow-hidden border-2 border-black ${isAdmin ? 'admin-highlight cursor-pointer' : ''} ${activeElementId === 'deco-circle' ? 'ring-4 ring-pink-500' : ''}"
                  style="width:${circleSize}px;height:${circleSize}px;transform: rotate(${circle?.style?.rotation || 12}deg);"
                  ${isAdmin ? 'onclick="selectElement(\'deco-circle\')"' : ''}
                >
                  ${circle?.content ?
                    `<div class="circle-img-fx ${fxClass}" style="${fxVars}"><div class="circle-img-rotator"><img src="${circle.content}" class="w-full h-full object-cover" alt="裝飾圖片"></div></div>` :
                    `<div class="w-full h-full bg-gray-300"></div>`
                  }
                </div>
              </div>
            `;
          })()}
        </div>
      `;
      updateMobilePreviewOverlay();
      syncCarouselUI();
      // 初始化左側動畫
      setTimeout(() => {
        if (typeof initLeftAnimation === 'function') initLeftAnimation();
      }, 100);
    }

    function showLoginModal() {
      document.getElementById('login-modal').style.display = 'flex';
      document.getElementById('password-input').focus();
    }

    function hideLoginModal() {
      document.getElementById('login-modal').style.display = 'none';
      document.getElementById('password-input').value = '';
    }

    function handleLogin(e) {
      e.preventDefault();
      if (document.getElementById('password-input').value === 'drawme') {
        isAdmin = true;
        hideLoginModal();
        render();
      } else {
        alert('密碼錯誤！');
      }
    }

    function exitAdmin() {
      isAdmin = false;
      activeElementId = null;
      render();
    }

    function selectElement(id) {
      activeElementId = id;
      render();
    }

    // ============ 自訂動畫游標 ============
    const CURSOR_FRAMES = [];
    for (let i = 1; i <= 19; i++) {
      CURSOR_FRAMES.push('./docs/assets/player/player' + i + '.PNG');
    }
    let cursorFrame = 0;
    let cursorInterval = null;
    const cursorEl = document.getElementById('custom-cursor');
    const cursorImg = cursorEl.querySelector('img');

    function getCurrentSettings() {
      return getResponsiveObject(siteData.settings || {});
    }

    function initCursor() {
      const settings = getCurrentSettings();
      const enabled = settings.cursorEnabled !== false;
      const size = settings.cursorSize || 48;
      const speed = settings.cursorSpeed || 80;

      if (enabled) {
        document.body.classList.add('custom-cursor-enabled');
        cursorEl.style.width = size + 'px';
        cursorEl.style.height = size + 'px';
        cursorEl.style.display = 'block';

        // 預載圖片
        CURSOR_FRAMES.forEach(src => {
          const img = new Image();
          img.src = src;
        });

        // 開始動畫
        if (cursorInterval) clearInterval(cursorInterval);
        cursorInterval = setInterval(() => {
          cursorFrame = (cursorFrame + 1) % CURSOR_FRAMES.length;
          cursorImg.src = CURSOR_FRAMES[cursorFrame];
        }, speed);
      } else {
        document.body.classList.remove('custom-cursor-enabled');
        cursorEl.style.display = 'none';
        if (cursorInterval) clearInterval(cursorInterval);
      }
    }

    document.addEventListener('mousemove', (e) => {
      if (getCurrentSettings().cursorEnabled !== false) {
        cursorEl.style.left = e.clientX + 'px';
        cursorEl.style.top = e.clientY + 'px';
      }
    });

    document.addEventListener('mouseenter', () => {
      if (getCurrentSettings().cursorEnabled !== false) {
        cursorEl.style.display = 'block';
      }
    });

    document.addEventListener('mouseleave', () => {
      cursorEl.style.display = 'none';
    });

    // 更新游標設定
    function updateCursorSettings(updates) {
      updateSettings(updates);
      initCursor();
    }

    // ============ 左側動畫 PNG 序列 ============
    const LEFT_ANIM_FRAMES = [];
    for (let i = 0; i <= 152; i++) {
      LEFT_ANIM_FRAMES.push('./docs/assets/sequence/frame_' + String(i).padStart(5, '0') + '.png');
    }
    let leftAnimFrame = 0;
    let leftAnimInterval = null;

    function getLeftAnimSettings() {
      return getResponsiveObject(siteData.decoration?.leftAnimation || {});
    }

    function initLeftAnimation() {
      const settings = getLeftAnimSettings();
      const useSequence = settings.useSequence !== false;
      const speed = settings.sequenceSpeed || 80;

      const leftAnimEl = document.getElementById('left-anim-sequence');
      if (!leftAnimEl) return;

      const leftAnimImg = leftAnimEl.querySelector('img');
      if (!leftAnimImg) return;

      if (useSequence) {
        // 預載圖片
        LEFT_ANIM_FRAMES.forEach(src => {
          const img = new Image();
          img.src = src;
        });

        // 開始動畫
        if (leftAnimInterval) clearInterval(leftAnimInterval);
        leftAnimInterval = setInterval(() => {
          leftAnimFrame = (leftAnimFrame + 1) % LEFT_ANIM_FRAMES.length;
          leftAnimImg.src = LEFT_ANIM_FRAMES[leftAnimFrame];
        }, speed);
      } else {
        if (leftAnimInterval) clearInterval(leftAnimInterval);
      }
    }

    function updateLeftAnimationSettings(updates) {
      updateLeftAnimation(updates);
      initLeftAnimation();
    }

    async function waitForCriticalFonts() {
      if (!document.fonts || typeof document.fonts.load !== 'function') return;

      const settings = getResponsiveObject(siteData.settings || INITIAL_DATA.settings);
      const font = settings?.englishFont || 'GarmentDistrict';
      const fontsToLoad = Array.from(new Set(['ChenYuluoyan', font])).filter(Boolean);

      const timeout = (ms) => new Promise(resolve => setTimeout(resolve, ms));
      const loads = fontsToLoad.map(f => document.fonts.load(`16px '${f}'`).catch(() => null));

      await Promise.race([Promise.all(loads), timeout(8000)]);
    }

    async function bootstrapApp() {
      document.body.classList.add('app-loading');
      applyStyles();
      await waitForCriticalFonts();
      render();
      if (typeof initCursor === 'function') initCursor();
      document.body.classList.remove('app-loading');
      document.body.classList.add('app-ready');
    }

    bootstrapApp();
  </script>
</body>
</html>
